<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Level Up: Fighting for or against Graffiti | B1U9 Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap');
        
        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background: linear-gradient(135deg, #f8fafc 0%, #ffffff 50%, #e0f2fe 100%);
            min-height: 100vh;
        }

        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background-color: #e2e8f0;
            border-radius: 10px;
        }

        .tab-active-vocab { background-color: #0ea5e9; color: white; border-color: #38bdf8; }
        .tab-active-grammar { background-color: #4f46e5; color: white; border-color: #818cf8; }
        .tab-active-quiz { background-color: #ec4899; color: white; border-color: #f472b6; }
        
        .fade-in { animation: fadeIn 0.5s ease-out; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .option-correct { border-color: #22c55e !important; background-color: #f0fdf4 !important; color: #15803d !important; }
        .option-wrong { border-color: #ef4444 !important; background-color: #fef2f2 !important; color: #b91c1c !important; }
    </style>
</head>
<body class="p-4 md:p-8">

    <!-- Header -->
    <header class="max-w-6xl mx-auto mb-8 flex flex-col md:flex-row md:items-center justify-between gap-6">
        <div class="fade-in">
            <div class="flex items-center gap-3 mb-2">
                <div class="bg-sky-500 p-2 rounded-xl shadow-lg rotate-3 text-white">
                    <i class="fas fa-spray-can fa-2x"></i>
                </div>
                <h1 class="text-3xl md:text-4xl font-black bg-gradient-to-r from-sky-500 via-indigo-600 to-slate-900 bg-clip-text text-transparent">
                    Level Up: Fighting for or against Graffiti
                </h1>
            </div>
            <p class="text-slate-500 font-medium flex items-center gap-2">
                <i class="fas fa-bullseye text-sky-400"></i> B1 Reading & Vocabulary Dashboard ‚Äì Unit 9
            </p>
        </div>
        
        <div class="flex items-center gap-4 bg-white p-4 rounded-[2rem] shadow-xl border-2 border-sky-100">
            <div class="relative">
                <div class="w-14 h-14 bg-gradient-to-tr from-sky-400 to-indigo-500 rounded-full flex items-center justify-center text-white shadow-lg border-2 border-white">
                    <i class="fas fa-user-tie fa-2xl"></i>
                </div>
                <div class="absolute -bottom-1 -right-1 bg-green-400 w-4 h-4 rounded-full border-2 border-white"></div>
            </div>
            <div>
                <p class="text-[10px] text-slate-400 uppercase font-black tracking-widest leading-none mb-1">Coach Janelle</p>
                <p class="font-black text-indigo-900 text-lg">Online Now ‚ú®</p>
            </div>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="max-w-6xl mx-auto mb-10 flex flex-wrap justify-center gap-4">
        <button onclick="switchTab('vocab')" id="btn-vocab" class="tab-btn flex items-center gap-3 py-4 px-8 rounded-full border-2 font-black transition-all duration-300 shadow-sm bg-white text-slate-500 border-slate-100 tab-active-vocab">
            <i class="fas fa-brain"></i> B1 Lexicon
        </button>
        <button onclick="switchTab('grammar')" id="btn-grammar" class="tab-btn flex items-center gap-3 py-4 px-8 rounded-full border-2 font-black transition-all duration-300 shadow-sm bg-white text-slate-500 border-slate-100">
            <i class="fas fa-pen-nib"></i> Master Patterns
        </button>
        <button onclick="switchTab('quiz')" id="btn-quiz" class="tab-btn flex items-center gap-3 py-4 px-8 rounded-full border-2 font-black transition-all duration-300 shadow-sm bg-white text-slate-500 border-slate-100">
            <i class="fas fa-trophy"></i> Ultimate Challenge
        </button>
    </nav>

    <!-- Content Sections -->
    <main class="max-w-6xl mx-auto">
        
        <!-- VOCABULARY SECTION -->
        <section id="section-vocab" class="content-section">
            <div class="grid grid-cols-1 lg:grid-cols-12 gap-8 items-start">
                <div class="lg:col-span-8 flex flex-col items-center">
                    <div id="vocab-card" class="w-full bg-white rounded-[3rem] shadow-2xl border-b-[12px] border-sky-400 p-10 md:p-16 text-center relative overflow-hidden transition-all duration-500">
                        <div id="vocab-number" class="absolute top-8 right-12 text-sky-100 font-black text-8xl select-none opacity-40">1</div>
                        <div class="relative z-10">
                            <div id="vocab-pos" class="inline-block px-4 py-1 rounded-full bg-sky-100 text-sky-600 font-black text-xs uppercase tracking-widest mb-3">adj.</div>
                            <h2 id="vocab-word" class="text-4xl md:text-5xl font-black text-slate-800 tracking-tighter mb-1">detailed</h2>
                            <h3 id="vocab-def" class="text-xl font-bold text-slate-500 mb-2">Ë©≥Á¥∞ÁöÑÔºõÁ¥∞Á∑ªÁöÑ</h3>
                            <p id="vocab-family" class="text-sm md:text-base text-slate-500 mb-6 italic"></p>
                            
                            <div id="vocab-example-container" class="hidden animate-in fade-in duration-500 max-w-2xl mx-auto text-left">
                                <div class="p-6 bg-white rounded-3xl border-2 border-sky-200 shadow-inner">
                                    <p id="vocab-example" class="text-lg text-slate-700 font-medium mb-4 italic"></p>
                                    <p id="vocab-ch" class="text-slate-400 font-medium"></p>
                                </div>
                            </div>
                            <button id="btn-reveal" onclick="revealExample()" class="mt-4 bg-sky-500 text-white px-8 py-4 rounded-2xl font-black hover:bg-sky-600 transition-all shadow-lg">REVEAL CONTEXT</button>
                        </div>
                    </div>
                    <div class="flex items-center gap-6 mt-10">
                        <button onclick="prevVocab()" class="w-16 h-16 rounded-3xl bg-white shadow-xl flex items-center justify-center text-slate-400 hover:text-sky-500 transition-all border border-slate-50"><i class="fas fa-chevron-left fa-2x"></i></button>
                        <div id="vocab-counter" class="bg-white px-8 py-4 rounded-3xl font-black text-2xl text-slate-700 shadow-lg">1 / 16</div>
                        <button onclick="nextVocab()" class="w-16 h-16 rounded-3xl bg-sky-500 shadow-xl flex items-center justify-center text-white hover:bg-sky-600 transition-all"><i class="fas fa-chevron-right fa-2x"></i></button>
                    </div>
                </div>
                <div class="lg:col-span-4 bg-white p-6 rounded-[2.5rem] shadow-xl border border-slate-100">
                    <h3 class="text-2xl font-black text-slate-800 mb-6 flex items-center gap-2"><i class="fas fa-heart text-pink-500"></i> Phrases</h3>
                    <div id="idioms-list" class="space-y-3 max-h-[500px] overflow-y-auto pr-2 custom-scrollbar">
                        <!-- Idioms injected here -->
                    </div>
                </div>
            </div>
        </section>

        <!-- GRAMMAR SECTION -->
        <section id="section-grammar" class="content-section hidden">
            <div class="space-y-10 fade-in">
                <!-- Focus: S + V..., V-ing/p.p. (participle clause) -->
                <div class="bg-gradient-to-br from-indigo-900 to-sky-900 rounded-[4rem] p-10 md:p-16 text-white shadow-2xl">
                    <h2 class="text-3xl md:text-4xl font-black mb-6">S + V..., V‚Äëing / p.p.</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-10">
                        <div class="bg-white/10 p-8 rounded-[2rem] border border-white/20">
                            <h4 class="font-black text-sky-300 flex items-center gap-2 mb-4">
                                <i class="fas fa-lightbulb"></i> Adding extra information
                            </h4>
                            <p class="mb-4 text-sm md:text-base">
                                We can use a <span class="text-sky-300 font-bold">V‚Äëing</span> or <span class="text-sky-300 font-bold">p.p.</span> clause after a sentence to add extra information about the subject or action.  
                                This is common in B2‚Äëlevel descriptions and news writing. [web:134]
                            </p>
                            <ul class="space-y-2 text-sm">
                                <li>‚Ä¢ Their art starts as sketches and outlines, <span class="text-sky-300 font-bold">perfected</span> with vivid pictures and various details later.</li>
                                <li>‚Ä¢ The city of Los Angeles has a huge problem with graffiti, <span class="text-sky-300 font-bold">spending</span> millions of dollars every year cleaning it up.</li>
                                <li>‚Ä¢ Many people walk past graffiti every day, <span class="text-sky-300 font-bold">associating</span> it with crime or pollution. [web:127][web:130]</li>
                            </ul>
                        </div>
                        <div class="space-y-4">
                            <h4 class="font-black text-2xl">Form & common mistakes</h4>
                            <div class="p-5 bg-indigo-700/50 rounded-2xl border border-indigo-500/30 text-sm">
                                <p><span class="text-red-300 font-black">‚úó</span> Their art starts as sketches and outlines, <span class="underline">is perfected</span> with vivid pictures later.</p>
                                <p><span class="text-green-300 font-black">‚úì</span> Their art starts as sketches and outlines, <span class="underline">perfected</span> with vivid pictures later.</p>
                                <p class="mt-1 text-indigo-100 text-xs">
                                    In this pattern, we usually drop <span class="font-bold">be</span> and use the past participle alone (perfected, destroyed, polluted).
                                </p>
                            </div>
                            <div class="p-5 bg-indigo-700/50 rounded-2xl border border-indigo-500/30 text-sm">
                                <p><span class="text-red-300 font-black">‚úó</span> The city has a problem with graffiti, <span class="underline">spend</span> millions of dollars every year.</p>
                                <p><span class="text-green-300 font-black">‚úì</span> The city has a problem with graffiti, <span class="underline">spending</span> millions of dollars every year.</p>
                                <p class="mt-1 text-indigo-100 text-xs">
                                    Use <span class="font-bold">V‚Äëing</span> to show an action that happens at the same time as the main verb.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Talking about art, crime, and community impact -->
                <div class="bg-white rounded-[4rem] p-10 md:p-16 shadow-2xl border-2 border-sky-50">
                    <h3 class="text-3xl font-black text-slate-800 mb-8 flex items-center gap-4 text-sky-500">
                        <i class="fas fa-city"></i> Art, crime, or visual pollution?
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <div class="bg-sky-50 p-8 rounded-3xl border-2 border-sky-100">
                            <p class="text-sm mb-3">
                                At this level, you are expected to talk about graffiti as a <span class="font-bold">social issue</span>, not just as ‚Äúpretty‚Äù or ‚Äúugly‚Äù. [web:127][web:130][web:135]
                            </p>
                            <ul class="space-y-2 text-sm text-slate-700">
                                <li>‚Ä¢ Some people see graffiti as a form of visual art, expressing strong opinions about politics or community life.</li>
                                <li>‚Ä¢ Others focus on the mess and the violence that some images suggest, associating graffiti with criminal or destructive behavior.</li>
                                <li>‚Ä¢ Cities must balance permission and control, making an effort to support creativity without increasing visual pollution or fear.</li>
                            </ul>
                        </div>
                        <div class="p-8 bg-indigo-50 rounded-3xl border-2 border-indigo-100">
                            <p class="font-black text-indigo-900 mb-2 italic">Coach Janelle‚Äôs tip:</p>
                            <p class="text-indigo-800 text-sm leading-relaxed">
                                Try linking <span class="font-bold">opinion words</span> (in my opinion, I associate, I am horrified)  
                                with <span class="font-bold">social words</span> (community, violence, criminal, pollution) to sound more precise when you discuss graffiti.
                            </p>
                        </div>
                    </div>
                </div>

            </div>
        </section>

        <!-- QUIZ SECTION -->
        <section id="section-quiz" class="content-section hidden">
            <div id="quiz-container" class="max-w-4xl mx-auto py-10">
                <!-- Quiz dynamically injected here -->
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="max-w-6xl mx-auto mt-20 p-10 bg-white rounded-[4rem] shadow-xl flex flex-col md:flex-row gap-8 items-center border border-slate-50">
        <div class="w-24 h-24 bg-gradient-to-tr from-sky-500 to-indigo-500 rounded-full flex-shrink-0 flex items-center justify-center text-white text-4xl shadow-xl">
            <i class="fas fa-user-graduate"></i>
        </div>
        <div>
            <h4 class="text-2xl font-black text-indigo-900 mb-2">Coach Janelle's Tip</h4>
            <p id="footer-tip" class="text-indigo-800 italic">
                "When you talk about graffiti, show both sides: the effort and creativity, but also the possible damage to the community."
            </p>
        </div>
    </footer>

    <script>
        // --- DATA: B1 U9 Fighting for or against Graffiti ---

        const vocabulary = [
            {
                word: "detailed",
                pos: "adj.",
                def: "Ë©≥Á¥∞ÁöÑÔºõÁ¥∞Á∑ªÁöÑ",
                family: "detail (n.)",
                example: "The art college students were asked to write a detailed description of their favorite work of art.",
                ch: "ÈÄô‰∫õËóùË°ìÂ≠∏Èô¢ÁöÑÂ≠∏ÁîüË¢´Ë¶ÅÊ±ÇÂ∞çÊñº‰ªñÂÄëÊúÄÂñúÊÑõÁöÑËóùË°ì‰ΩúÂìÅÂØ´‰∏Ä‰ªΩË©≥Á¥∞ÁöÑÊèèËø∞„ÄÇ"
            },
            {
                word: "mess",
                pos: "n.",
                def: "Âáå‰∫ÇÔºõÈ´í‰∫Ç",
                family: "messy (adj.)",
                example: "A week after the typhoon left the country, many areas were in a mess.",
                ch: "Âú®ÈÄôÂÄãÈ¢±È¢®ÈÅ†Èõ¢ÈÄôÂÄãÂúãÂÆ∂‰∏ÄÈÄ±ÂæåÔºåË®±Â§öÂú∞ÂçÄ‰∏ÄÁâáÂáå‰∫Ç„ÄÇ"
            },
            {
                word: "express",
                pos: "v.",
                def: "Ë°®ÈÅî",
                family: "expression (n.)",
                example: "Lady Gaga uses music to express her view that people are different but equal.",
                ch: "Lady GagaÁî®Èü≥Ê®Ç‰æÜË°®ÈÅîÂ•πË™çÁÇ∫‰∫∫ÂÄëÁîüËÄå‰∏çÂêå‰ΩÜÂêåÁÇ∫Âπ≥Á≠âÁöÑËßÄÈªû„ÄÇ"
            },
            {
                word: "opinion",
                pos: "n.",
                def: "ÊÉ≥Ê≥ïÔºõÊÑèË¶ã",
                family: "",
                example: "In Cassandra‚Äôs opinion, borrowing books from the library is smarter than buying them because we usually only read them once.",
                ch: "‰æùCassandra‰πãË¶ãÔºåÂæûÂúñÊõ∏È§®ÂÄüÊõ∏ÊØîÂéªË≤∑Êõ∏ÈÇÑË¶ÅËÅ∞ÊòéÔºåÂõ†ÁÇ∫ÊàëÂÄëÈÄöÂ∏∏Âè™ÊúÉÁúã‰∏ÄÈÅç„ÄÇ"
            },
            {
                word: "contrast",
                pos: "v./n.",
                def: "Â∞çÊØîÔºõÂ∞çÁÖß",
                family: "",
                example: "The video contrasted a picture of a heavy smoker‚Äôs lungs with that of a non-smoker‚Äôs to discourage people from smoking.",
                ch: "ÈÄôÊîØÂΩ±ÁâáÂ∞áËÄÅÁÖôÊßçÁöÑËÇ∫ÁöÑÂúñÁâáÂíå‰∏çÊäΩÁÖôÁöÑ‰∫∫ÁöÑÂúñÁâáÂÅö‰∫Ü‰∏ÄÂÄãÂ∞çÊØîÔºå‰ª•Âã∏Èòª‰∫∫ÂÄë‰∏çË¶ÅÂê∏ÁÖô„ÄÇ"
            },
            {
                word: "horror",
                pos: "n.",
                def: "ÂèØÊÄïÔºõÊÅêÊÄñÔºõÊÅêÊáº",
                family: "horrible (adj.), horrify (v.)",
                example: "It‚Äôs difficult for most of us to imagine the horror of war because we haven‚Äôt experienced it ourselves.",
                ch: "Â∞çÊñºÂ§ßÈÉ®ÂàÜÁöÑÊàëÂÄëËÄåË®ÄÔºåË¶ÅÊÉ≥ÂÉèÊà∞Áà≠ÁöÑÂèØÊÄïÂÖ∂ÂØ¶ÊòØÂõ∞Èõ£ÁöÑÔºåÂõ†ÁÇ∫ÊàëÂÄëÂæû‰æÜÊ≤íÊúâËá™Â∑±Á∂ìÊ≠∑ÈÅé„ÄÇ"
            },
            {
                word: "innocence",
                pos: "n.",
                def: "ÁÑ°ËæúÔºõÁ¥îÁúü",
                family: "innocent (adj.)",
                example: "The salesman was good at getting customers to buy his products because he had a look of innocence.",
                ch: "ÈÄôÂÄãÊ•≠ÂãôÂì°ÂæàÊìÖÈï∑ËÆìÈ°ßÂÆ¢ÂÄëË≥ºË≤∑‰ªñÁöÑÁî¢ÂìÅÔºåÂõ†ÁÇ∫‰ªñÊúâ‰∏ÄÂÄãÁ¥îÁúüÁöÑÂ§ñË°®„ÄÇ"
            },
            {
                word: "violence",
                pos: "n.",
                def: "Êö¥Âäõ",
                family: "violent (adj.)",
                example: "Most people would agree that the use of violence against children is not right in any situation.",
                ch: "Â§öÊï∏‰∫∫ÂêåÊÑè‰∏çÁÆ°Âú®‰ªª‰ΩïÊÉÖÊ≥Å‰∏ãÁî®Êö¥Âäõ‰æÜÂ∞çÂ≠©Â≠êÂ∞±ÊòØ‰∏çÂ∞çÁöÑ„ÄÇ"
            },
            {
                word: "visual",
                pos: "adj.",
                def: "Ë¶ñË¶∫ÁöÑ",
                family: "",
                example: "Debra loves all kinds of visual arts, including pottery, paintings, drawings, and films.",
                ch: "DebraÂñúÊ≠°ÂêÑÂºèÂêÑÊ®£ÁöÑË¶ñË¶∫ËóùË°ìÔºåÂåÖÊã¨Èô∂Ëóù„ÄÅÊ≤πÁï´„ÄÅÂúñÁï´ÂíåÈõªÂΩ±„ÄÇ"
            },
            {
                word: "pollution",
                pos: "n.",
                def: "Ê±ôÊüì",
                family: "pollute (v.)",
                example: "This machine can check the level of air pollution in your apartment and help reduce it.",
                ch: "ÈÄôÂÄãÊ©üÂô®ÂèØ‰ª•Ê™¢Êü•Âá∫Âú®‰Ω†ÁöÑÂÖ¨ÂØìË£°Á©∫Ê∞£Ê±ôÊüìÁöÑÁ®ãÂ∫¶Ôºå‰∏¶‰∏îÂπ´Âä©Èôç‰ΩéÂÆÉ„ÄÇ"
            },
            {
                word: "permission",
                pos: "n.",
                def: "Ë®±ÂèØÔºõÂáÜË®±",
                family: "permit (v.)",
                example: "Excuse me, sir. You need to get special permission for the video camera in the museum.",
                ch: "Â∞ç‰∏çËµ∑ÔºåÂÖàÁîü„ÄÇÂú®ÈÄôÂÄãÂçöÁâ©È§®Ë£°‰Ω†ÈúÄË¶ÅÁâπÂà•ÁöÑË®±ÂèØÊâçËÉΩ‰ΩøÁî®ÊîùÂΩ±Ê©ü„ÄÇ"
            },
            {
                word: "effort",
                pos: "n.",
                def: "Âä™Âäõ",
                family: "",
                example: "Cassandra put a lot of effort into her science project and her teacher praised it in the end.",
                ch: "CassandraÂæàÂä™ÂäõÁöÑÂÅöÂ•πÁöÑÁßëÂ≠∏‰ΩúÊ•≠Ôºå‰∏îÊúÄÂæåËÄÅÂ∏´Á®±ËÆöÂÆÉ„ÄÇ"
            },
            {
                word: "community",
                pos: "n.",
                def: "Á§æÂçÄ",
                family: "",
                example: "Leaders of various local communities are meeting today to express their ideas about how to clean up their streets.",
                ch: "Ë®±Â§öÁï∂Âú∞Á§æÂçÄÁöÑÈ†òÂ∞éËÄÖ‰ªäÂ§©Â∞áËÅöÂú®‰∏ÄËµ∑Ôºå‰æÜË°®ÈÅîÈóúÊñºÂ¶Ç‰ΩïÊää‰ªñÂÄëÁöÑË°óÈÅìÊ∏ÖÁêÜ‰πæÊ∑®ÁöÑÊÉ≥Ê≥ï„ÄÇ"
            },
            {
                word: "associate",
                pos: "v.",
                def: "ËÅØÊÉ≥",
                family: "association (n.)",
                example: "Most people in Taiwan associate Beethoven‚Äôs ‚ÄúFor Elise‚Äù with the coming of the garbage truck.",
                ch: "Âú®Ëá∫ÁÅ£Â§ßÈÉ®ÂàÜÁöÑ‰∫∫ÈÉΩÊúÉÊääË≤ùÂ§öËä¨ÁöÑ„ÄàÁµ¶ÊÑõÈ∫óÁµ≤„ÄâÂíåÂûÉÂúæËªäÁöÑÂà∞‰æÜËÅØÊÉ≥Âú®‰∏ÄËµ∑„ÄÇ"
            },
            {
                word: "criminal",
                pos: "adj./n.",
                def: "ÁäØÁΩ™ÁöÑÔºõÁΩ™ÁäØ",
                family: "crime (n.)",
                example: "Studies show that better education can lead to a drop in criminal behavior.",
                ch: "Á†îÁ©∂È°ØÁ§∫ÔºåËºÉÂ•ΩÁöÑÊïôËÇ≤ÂèØ‰ª•Â∞éËá¥ÁäØÁΩ™Ë°åÁÇ∫ÁöÑÈôç‰Ωé„ÄÇ"
            },
            {
                word: "destructive",
                pos: "adj.",
                def: "Á†¥Â£ûÊÄßÁöÑÔºõÊØÄÊªÖÊÄßÁöÑ",
                family: "destroy (v.), destruction (n.)",
                example: "It is hard for most people to imagine the destructive power of modern bombs.",
                ch: "Â∞çÂ§ßÈÉ®ÂàÜ‰∫∫‰æÜË™™ÔºåÂæàÈõ£ÊÉ≥ÂÉèÁèæ‰ª£ÁöÑÁÇ∏ÂΩàÊâÄÂÖ∑ÊúâÁöÑÊØÅÊªÖÊÄßÂäõÈáè„ÄÇ"
            }
        ];

        const idioms = [
            { phrase: "come in", def: "ÂÖ∑ÊúâÔºàÂΩ¢ÁãÄ„ÄÅÂ∞∫ÂØ∏Á≠âÔºâ", example: "The T-shirt you are trying on right now also comes in white, black, and navy blue." },
            { phrase: "stand for", def: "‰ª£Ë°®", example: "In the term WHO, W stands for ‚ÄúWorld,‚Äù H stands for ‚ÄúHealth,‚Äù and O stands for ‚ÄúOrganization.‚Äù" },
            { phrase: "nothing but", def: "Âè™‰∏çÈÅéÊòØÔºõÂÉÖÂÉÖ", example: "Mr. Rogers wants to have nothing but happiness and a lot of quality time with his family." },
            { phrase: "get rid of", def: "ÂéªÈô§ÔºõÊì∫ËÑ´", example: "Betsy asked her husband to get rid of all the disgusting rotten food in the refrigerator." },
            { phrase: "when it comes to", def: "Áï∂Ë´áÂà∞‚Ä¶‚Ä¶ÊôÇ", example: "When it comes to decorating the Christmas tree, many families like to put the star or angel on top at the end." }
        ];

        // Quiz questions ‚Äì B2 style, focusing on art vs crime, participle clauses, social impact
        const quizQuestions = [
            {
                type: "mc",
                q: "Which sentence best reflects the central question of this unit?",
                options: [
                    "Graffiti is colorful and appears in many cities.",
                    "Graffiti is obviously art, taking a lot of time and hard work, but some people still see it as nothing but visual pollution and criminal damage.",
                    "Graffiti is a kind of pollution which is always destructive and violent.",
                    "Graffiti comes in many different colors and shapes."
                ],
                correct: 1,
                explanation: "The answer shows both sides: effort and art, but also visual pollution and crime, which matches the ‚Äúfor or against‚Äù focus. [web:127][web:130]"
            },
            {
                type: "mc",
                q: "Choose the sentence that correctly uses a participle clause after the main clause.",
                options: [
                    "The city has a problem with graffiti, spends millions of dollars cleaning it up every year.",
                    "The city has a problem with graffiti, spending millions of dollars cleaning it up every year.",
                    "The city has a problem with graffiti, is spending millions of dollars cleaning it up every year.",
                    "The city has a problem with graffiti, to spend millions of dollars cleaning it up every year."
                ],
                correct: 1,
                explanation: "The V‚Äëing form \"spending\" adds extra information about the city‚Äôs action at the same time as the main verb. [web:134]"
            },
            {
                type: "error",
                q: "Which part of the sentence needs to be changed? \"Their art starts as sketches and outlines, is perfected with vivid pictures and various details later.\"",
                options: ["starts as", "sketches and outlines", "is perfected", "vivid pictures and various details"],
                correct: 2,
                fix: "perfected",
                explanation: "In this pattern we drop \"is\" and use the past participle alone: \"..., perfected with vivid pictures...\"."
            },
            {
                type: "mc",
                q: "Which sentence most clearly contrasts different opinions about graffiti?",
                options: [
                    "Some love it, others hate it, still others walk past without really thinking about it.",
                    "Some see it, others don‚Äôt see it, still others see it at night.",
                    "Some paint graffiti, others clean it, still others talk about it.",
                    "Some draw sketches, others spray-paint, still others scribble."
                ],
                correct: 0,
                explanation: "The sentence uses \"some... others... still others...\" to show three different attitudes, which fits the unit‚Äôs key structure."
            },
            {
                type: "type",
                q: "Complete the sentence: \"In my ______, covering every wall with graffiti can destroy the innocence and beauty of an old community.\"",
                answer: "opinion",
                hint: "o _ _ n _ o _",
                explanation: "\"Opinion\" is the noun used to introduce a personal view on a topic like graffiti."
            },
            {
                type: "mc",
                q: "Which sentence best uses vocabulary from the unit to show a negative view of graffiti?",
                options: [
                    "Graffiti is a kind of visual art that many people enjoy taking photos of.",
                    "Graffiti can turn a clean street into a mess, giving people a feeling of horror and associating the area with crime and violence.",
                    "Graffiti comes in many colors and shapes and often covers big walls in the city.",
                    "Graffiti sometimes shows detailed pictures that attract tourists."
                ],
                correct: 1,
                explanation: "The answer links mess, horror, crime, and violence, which reflects typical arguments against graffiti. [web:132][web:135]"
            },
            {
                type: "error",
                q: "Which word form is wrong in this sentence? \"The government is trying to get rid from destructive graffiti in the city center.\"",
                options: ["government", "is trying", "get rid from", "destructive graffiti"],
                correct: 2,
                fix: "get rid of",
                explanation: "The correct phrase is \"get rid of\", not \"get rid from\"."
            },
            {
                type: "mc",
                q: "Which sentence best fits the pattern \"S + V..., V‚Äëing/p.p.\" and describes graffiti as art?",
                options: [
                    "Banksy is a famous street artist, his works stand for peace and innocence.",
                    "Banksy is a famous street artist, has painted many walls in different countries.",
                    "Banksy is a famous street artist, his work sometimes is considered criminal.",
                    "Banksy is a famous street artist, using powerful visual images to express his opinions about war and community life."
                ],
                correct: 3,
                explanation: "The V‚Äëing clause \"using powerful visual images...\" gives extra information about how he creates his art. [web:127][web:133]"
            },
            {
                type: "type",
                q: "Complete the sentence: \"Some people see graffiti as nothing but ______ behavior that should be punished.\"",
                answer: "criminal",
                hint: "c _ _ m _ n _ l",
                explanation: "\"Criminal\" describes behaviour that breaks the law, which matches this strongly negative opinion."
            },
            {
                type: "mc",
                q: "Which option completes the sentence in the most natural way? \"When it comes to graffiti, many local leaders focus on the ______ it may cause to buildings and to the community‚Äôs image.\"",
                options: ["innocence", "effort", "destruction", "permission"],
                correct: 2,
                explanation: "\"Destruction\" fits with the idea of damage to buildings and the community‚Äôs image."
            }
        ];

        // --- STATE ---
        let currentVocabIdx = 0;
        let currentQuizIdx = 0;
        let score = 0;
        let canAnswer = true;

        // --- VOCABULARY LOGIC ---
        function updateVocabUI() {
            const item = vocabulary[currentVocabIdx];
            document.getElementById('vocab-number').innerText = currentVocabIdx + 1;
            document.getElementById('vocab-pos').innerText = item.pos;
            document.getElementById('vocab-word').innerText = item.word;
            document.getElementById('vocab-def').innerText = item.def;
            document.getElementById('vocab-example').innerText = `"${item.example}"`;
            document.getElementById('vocab-ch').innerText = item.ch;
            document.getElementById('vocab-counter').innerText = `${currentVocabIdx + 1} / ${vocabulary.length}`;
            document.getElementById('vocab-family').innerText = item.family ? `Word family: ${item.family}` : "";
            
            document.getElementById('vocab-example-container').classList.add('hidden');
            document.getElementById('btn-reveal').classList.remove('hidden');
            document.getElementById('vocab-card').classList.remove('bg-sky-50');
        }

        function nextVocab() {
            currentVocabIdx = (currentVocabIdx + 1) % vocabulary.length;
            updateVocabUI();
        }

        function prevVocab() {
            currentVocabIdx = (currentVocabIdx - 1 + vocabulary.length) % vocabulary.length;
            updateVocabUI();
        }

        function revealExample() {
            document.getElementById('vocab-example-container').classList.remove('hidden');
            document.getElementById('btn-reveal').classList.add('hidden');
            document.getElementById('vocab-card').classList.add('bg-sky-50');
        }

        function loadIdioms() {
            const list = document.getElementById('idioms-list');
            list.innerHTML = idioms.map(item => `
                <div class="p-4 bg-slate-50 rounded-2xl hover:bg-indigo-50 transition-all">
                    <p class="font-black text-indigo-600">${item.phrase}</p>
                    <p class="text-xs text-slate-400 mb-1">${item.def}</p>
                    <p class="text-xs text-slate-500 italic">"${item.example}"</p>
                </div>
            `).join('');
        }

        // --- TAB LOGIC ---
        function switchTab(tab) {
            document.querySelectorAll('.content-section').forEach(s => s.classList.add('hidden'));
            document.querySelectorAll('.tab-btn').forEach(b => {
                b.className = "tab-btn flex items-center gap-3 py-4 px-8 rounded-full border-2 font-black transition-all duration-300 shadow-sm bg-white text-slate-500 border-slate-100";
            });

            document.getElementById(`section-${tab}`).classList.remove('hidden');
            document.getElementById(`btn-${tab}`).classList.add(`tab-active-${tab}`);

            if (tab === 'quiz') startQuiz();
        }

        // --- QUIZ LOGIC ---
        function startQuiz() {
            currentQuizIdx = 0;
            score = 0;
            renderQuestion();
        }

        function renderQuestion() {
            canAnswer = true;
            const container = document.getElementById('quiz-container');
            const q = quizQuestions[currentQuizIdx];

            let content = `
                <div class="bg-white rounded-[4rem] shadow-2xl border-2 border-pink-100 min-h-[500px] flex flex-col overflow-hidden fade-in">
                    <div class="bg-slate-50 p-6 flex justify-between border-b">
                        <div class="flex items-center gap-3">
                            <div class="bg-pink-500 text-white w-10 h-10 rounded-xl flex items-center justify-center font-black">${currentQuizIdx + 1}</div>
                            <p class="text-sm font-bold text-slate-700">Question ${currentQuizIdx + 1} of ${quizQuestions.length}</p>
                        </div>
                        <p class="text-lg font-black text-pink-600">Score: ${score}</p>
                    </div>
                    <div class="p-10 md:p-16 flex-grow flex flex-col justify-center">
                        <h2 class="text-2xl md:text-3xl font-black text-slate-800 text-center mb-12">${q.q}</h2>
            `;

            if (q.type === 'mc' || q.type === 'error') {
                content += `<div class="grid grid-cols-1 md:grid-cols-2 gap-4">`;
                q.options.forEach((opt, idx) => {
                    content += `<button id="opt-${idx}" onclick="handleAnswer(${idx})" class="quiz-opt p-6 rounded-3xl font-black text-left border-2 bg-white border-slate-100 text-slate-600 hover:border-pink-300 transition-all">${opt}</button>`;
                });
                content += `</div>`;
            } else {
                content += `
                    <div class="space-y-6 max-w-xl mx-auto w-full">
                        <div class="text-center text-pink-300 font-black tracking-widest text-2xl uppercase mb-2">${q.hint}</div>
                        <input type="text" id="type-input" class="w-full text-center text-3xl font-black p-6 bg-slate-50 rounded-3xl border-4 border-dashed border-pink-100 focus:outline-none focus:border-pink-500" placeholder="...">
                        <button id="type-submit-btn" onclick="handleTypeAnswer()" class="w-full bg-indigo-900 text-white py-6 rounded-3xl font-black text-xl hover:bg-indigo-800 transition-all">SUBMIT</button>
                    </div>
                `;
            }

            content += `
                    <div id="feedback" class="mt-8 hidden p-6 rounded-3xl animate-in fade-in zoom-in duration-300">
                        <p id="feedback-text" class="text-2xl font-black mb-2"></p>
                        <div id="explanation-box" class="text-sm md:text-base font-medium text-slate-600 border-t border-slate-200 pt-4 mt-2"></div>
                    </div>
                </div></div>
            `;
            container.innerHTML = content;
        }

        function handleAnswer(idx) {
            if (!canAnswer) return;
            canAnswer = false;

            const q = quizQuestions[currentQuizIdx];
            const isCorrect = idx === q.correct;
            
            const btn = document.getElementById(`opt-${idx}`);
            if (isCorrect) {
                btn.classList.add('option-correct');
            } else {
                btn.classList.add('option-wrong');
                document.getElementById(`opt-${q.correct}`).classList.add('option-correct');
            }

            showFeedback(isCorrect);
        }

        function handleTypeAnswer() {
            if (!canAnswer) return;
            canAnswer = false;

            const input = document.getElementById('type-input');
            const val = input.value.trim().toLowerCase();
            const q = quizQuestions[currentQuizIdx];
            const isCorrect = val === q.answer.toLowerCase();
            
            if (isCorrect) {
                input.classList.add('text-green-600', 'border-green-500');
            } else {
                input.classList.add('text-red-600', 'border-red-500');
                if (val) {
                    input.value = `${val} ‚ûî ${q.answer}`;
                } else {
                    input.value = q.answer;
                }
            }

            showFeedback(isCorrect);
        }

        function showFeedback(isCorrect) {
            if (isCorrect) score++;
            
            const q = quizQuestions[currentQuizIdx];
            const fb = document.getElementById('feedback');
            const fbText = document.getElementById('feedback-text');
            const fbExp = document.getElementById('explanation-box');

            fb.classList.remove('hidden');
            fb.classList.add(isCorrect ? 'bg-green-50' : 'bg-red-50');
            fbText.innerText = isCorrect ? "üéØ Well done!" : "üí° Take another look";
            fbText.className = `text-2xl font-black mb-2 ${isCorrect ? 'text-green-600' : 'text-red-600'}`;
            
            let explanationHTML = `<strong>Explanation:</strong> ${q.explanation || ''}`;
            if (q.fix) explanationHTML = `<strong>Correction:</strong> <span class="text-red-600 underline">${q.fix}</span><br>${explanationHTML}`;
            
            fbExp.innerHTML = explanationHTML;

            setTimeout(() => {
                currentQuizIdx++;
                if (currentQuizIdx < quizQuestions.length) renderQuestion();
                else renderResults();
            }, 4000);
        }

        function getEncouragement(s) {
            if (s === quizQuestions.length) return { title: "Unit Master! üèÜ", msg: "You can now discuss graffiti as a serious social issue, not just wall decoration.", color: "text-yellow-600", icon: "rocket" };
            if (s >= 7) return { title: "Excellent Work! ‚ú®", msg: "You clearly understand both the artistic and destructive sides of graffiti. Use these patterns in discussions and writing tasks.", color: "text-green-600", icon: "sparkles" };
            if (s >= 4) return { title: "Nice Progress! üí™", msg: "Review key words like pollution, community, criminal, and then try the quiz again to sharpen your arguments.", color: "text-orange-600", icon: "smile" };
            return { title: "Keep Practicing! üå±", msg: "Focus on participle clauses and opinion language; they will help you sound more natural in debates about art and social issues.", color: "text-blue-600", icon: "heart" };
        }

        function renderResults() {
            const enc = getEncouragement(score);
            const container = document.getElementById('quiz-container');
            container.innerHTML = `
                <div class="bg-white rounded-[4rem] p-10 md:p-16 text-center shadow-2xl border-4 border-indigo-50 fade-in">
                    <div class="flex justify-center mb-6">
                        <i class="fas fa-${enc.icon} fa-5x text-yellow-500 drop-shadow-lg"></i>
                    </div>
                    <h2 class="text-5xl font-black mb-4 ${enc.color}">${enc.title}</h2>
                    <p class="text-2xl font-bold text-slate-700 mb-6">You scored <span class="text-indigo-600">${score}</span> / ${quizQuestions.length}</p>
                    <div class="bg-slate-50 p-8 rounded-3xl border-2 border-slate-100 mb-10 max-w-2xl mx-auto italic text-slate-600 text-lg">
                        "${enc.msg}"
                    </div>
                    <button onclick="startQuiz()" class="bg-slate-900 text-white px-12 py-6 rounded-3xl font-black hover:scale-105 transition-all shadow-xl flex items-center gap-3 mx-auto">
                        <i class="fas fa-redo"></i> RETRY CHALLENGE
                    </button>
                </div>
            `;
        }

        // --- INIT ---
        window.onload = () => {
            updateVocabUI();
            loadIdioms();
        };
    </script>
</body>
</html>
