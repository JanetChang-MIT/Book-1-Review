<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Review 2: Having Fun with Change | B1R2 Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap');
        
        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background: linear-gradient(135deg, #f8fafc 0%, #ffffff 50%, #dcfce7 100%);
            min-height: 100vh;
        }

        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background-color: #e2e8f0;
            border-radius: 10px;
        }

        .tab-active-vocab { background-color: #22c55e; color: white; border-color: #4ade80; }
        .tab-active-grammar { background-color: #4f46e5; color: white; border-color: #818cf8; }
        .tab-active-quiz { background-color: #ec4899; color: white; border-color: #f472b6; }
        
        .fade-in { animation: fadeIn 0.5s ease-out; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .option-correct { border-color: #22c55e !important; background-color: #f0fdf4 !important; color: #15803d !important; }
        .option-wrong { border-color: #ef4444 !important; background-color: #fef2f2 !important; color: #b91c1c !important; }
    </style>
</head>
<body class="p-4 md:p-8">

    <!-- Header -->
    <header class="max-w-6xl mx-auto mb-8 flex flex-col md:flex-row md:items-center justify-between gap-6">
        <div class="fade-in">
            <div class="flex items-center gap-3 mb-2">
                <div class="bg-emerald-500 p-2 rounded-xl shadow-lg rotate-3 text-white">
                    <i class="fas fa-random fa-2x"></i>
                </div>
                <h1 class="text-3xl md:text-4xl font-black bg-gradient-to-r from-emerald-500 via-lime-500 to-indigo-600 bg-clip-text text-transparent">
                    Review 2: Having Fun with Change
                </h1>
            </div>
            <p class="text-slate-500 font-medium flex items-center gap-2">
                <i class="fas fa-bullseye text-emerald-400"></i> B1 Review Dashboard ‚Äì Habits, Motivation & Action
            </p>
        </div>
        
        <div class="flex items-center gap-4 bg-white p-4 rounded-[2rem] shadow-xl border-2 border-emerald-100">
            <div class="relative">
                <div class="w-14 h-14 bg-gradient-to-tr from-emerald-400 to-green-500 rounded-full flex items-center justify-center text-white shadow-lg border-2 border-white">
                    <i class="fas fa-user-tie fa-2xl"></i>
                </div>
                <div class="absolute -bottom-1 -right-1 bg-green-400 w-4 h-4 rounded-full border-2 border-white"></div>
            </div>
            <div>
                <p class="text-[10px] text-slate-400 uppercase font-black tracking-widest leading-none mb-1">Coach Janelle</p>
                <p class="font-black text-indigo-900 text-lg">Online Now ‚ú®</p>
            </div>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="max-w-6xl mx-auto mb-10 flex flex-wrap justify-center gap-4">
        <button onclick="switchTab('vocab')" id="btn-vocab" class="tab-btn flex items-center gap-3 py-4 px-8 rounded-full border-2 font-black transition-all duration-300 shadow-sm bg-white text-slate-500 border-slate-100 tab-active-vocab">
            <i class="fas fa-brain"></i> B1 Lexicon
        </button>
        <button onclick="switchTab('grammar')" id="btn-grammar" class="tab-btn flex items-center gap-3 py-4 px-8 rounded-full border-2 font-black transition-all duration-300 shadow-sm bg-white text-slate-500 border-slate-100">
            <i class="fas fa-pen-nib"></i> Master Expressions
        </button>
        <button onclick="switchTab('quiz')" id="btn-quiz" class="tab-btn flex items-center gap-3 py-4 px-8 rounded-full border-2 font-black transition-all duration-300 shadow-sm bg-white text-slate-500 border-slate-100">
            <i class="fas fa-trophy"></i> Change Challenge
        </button>
    </nav>

    <!-- Content Sections -->
    <main class="max-w-6xl mx-auto">
        
        <!-- VOCABULARY SECTION -->
        <section id="section-vocab" class="content-section">
            <div class="grid grid-cols-1 lg:grid-cols-12 gap-8 items-start">
                <div class="lg:col-span-8 flex flex-col items-center">
                    <div id="vocab-card" class="w-full bg-white rounded-[3rem] shadow-2xl border-b-[12px] border-emerald-400 p-10 md:p-16 text-center relative overflow-hidden transition-all duration-500">
                        <div id="vocab-number" class="absolute top-8 right-12 text-emerald-100 font-black text-8xl select-none opacity-40">1</div>
                        <div class="relative z-10">
                            <div id="vocab-pos" class="inline-block px-4 py-1 rounded-full bg-emerald-100 text-emerald-600 font-black text-xs uppercase tracking-widest mb-3">adj.</div>
                            <h2 id="vocab-word" class="text-4xl md:text-5xl font-black text-slate-800 tracking-tighter mb-1">positive</h2>
                            <h3 id="vocab-def" class="text-xl font-bold text-slate-500 mb-2">Ê≠£Èù¢ÁöÑÔºõÁ©çÊ•µÁöÑÔºõÊ®ÇËßÄÁöÑ</h3>
                            <p id="vocab-family" class="text-sm md:text-base text-slate-500 mb-6 italic"></p>
                            
                            <div id="vocab-example-container" class="hidden animate-in fade-in duration-500 max-w-2xl mx-auto text-left">
                                <div class="p-6 bg-white rounded-3xl border-2 border-emerald-200 shadow-inner">
                                    <p id="vocab-example" class="text-lg text-slate-700 font-medium mb-4 italic"></p>
                                    <p id="vocab-ch" class="text-slate-400 font-medium"></p>
                                </div>
                            </div>
                            <button id="btn-reveal" onclick="revealExample()" class="mt-4 bg-emerald-500 text-white px-8 py-4 rounded-2xl font-black hover:bg-emerald-600 transition-all shadow-lg">REVEAL CONTEXT</button>
                        </div>
                    </div>
                    <div class="flex items-center gap-6 mt-10">
                        <button onclick="prevVocab()" class="w-16 h-16 rounded-3xl bg-white shadow-xl flex items-center justify-center text-slate-400 hover:text-emerald-500 transition-all border border-slate-50"><i class="fas fa-chevron-left fa-2x"></i></button>
                        <div id="vocab-counter" class="bg-white px-8 py-4 rounded-3xl font-black text-2xl text-slate-700 shadow-lg">1 / 18</div>
                        <button onclick="nextVocab()" class="w-16 h-16 rounded-3xl bg-emerald-500 shadow-xl flex items-center justify-center text-white hover:bg-emerald-600 transition-all"><i class="fas fa-chevron-right fa-2x"></i></button>
                    </div>
                </div>
                <div class="lg:col-span-4 bg-white p-6 rounded-[2.5rem] shadow-xl border border-slate-100">
                    <h3 class="text-2xl font-black text-slate-800 mb-6 flex items-center gap-2"><i class="fas fa-heart text-emerald-500"></i> Phrases</h3>
                    <div id="idioms-list" class="space-y-3 max-h-[500px] overflow-y-auto pr-2 custom-scrollbar">
                        <!-- Idioms injected here -->
                    </div>
                </div>
            </div>
        </section>

        <!-- EXPRESSIONS SECTION -->
        <section id="section-grammar" class="content-section hidden">
            <div class="space-y-10 fade-in">
                <!-- Focus: rather than / thanks to / take action / for the better -->
                <div class="bg-gradient-to-br from-indigo-900 to-emerald-900 rounded-[4rem] p-10 md:p-16 text-white shadow-2xl">
                    <h2 class="text-3xl md:text-4xl font-black mb-6">for the better, thanks to, rather than</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-10">
                        <div class="bg-white/10 p-8 rounded-[2rem] border border-white/20">
                            <h4 class="font-black text-emerald-300 flex items-center gap-2 mb-4">
                                <i class="fas fa-lightbulb"></i> Talking about change and reasons
                            </h4>
                            <p class="mb-4 text-sm md:text-base">
                                Review units on change often combine <span class="font-bold">result</span> and <span class="font-bold">reason</span> expressions. [web:147][web:147][web:153]
                            </p>
                            <ul class="space-y-2 text-sm">
                                <li>‚Ä¢ Trevor changed his life <span class="text-emerald-300 font-bold">for the better</span> by stopping drinking.</li>
                                <li>‚Ä¢ <span class="text-emerald-300 font-bold">Thanks to</span> a small experiment at the escalator, many ordinary pedestrians started using the stairs.</li>
                                <li>‚Ä¢ People chose to walk up the stairs <span class="text-emerald-300 font-bold">rather than</span> stand still on the escalator.</li>
                            </ul>
                        </div>
                        <div class="space-y-4">
                            <h4 class="font-black text-2xl">Key points</h4>
                            <div class="p-5 bg-indigo-700/50 rounded-2xl border border-indigo-500/30 text-sm">
                                <p><span class="text-green-300 font-black">‚Ä¢</span> <span class="font-bold">for the better</span> = in a more positive way.</p>
                                <p><span class="text-green-300 font-black">‚Ä¢</span> <span class="font-bold">thanks to + noun</span> gives a positive reason.</p>
                                <p><span class="text-green-300 font-black">‚Ä¢</span> <span class="font-bold">rather than</span> contrasts two choices.</p>
                            </div>
                            <div class="p-5 bg-indigo-700/50 rounded-2xl border border-indigo-500/30 text-sm">
                                <p><span class="text-red-300 font-black">‚úó</span> Thanks to he motivated me, I changed my routine.</p>
                                <p><span class="text-green-300 font-black">‚úì</span> Thanks to <span class="underline">his motivation</span>, I changed my routine.</p>
                                <p class="mt-1 text-indigo-100 text-xs">
                                    After \"thanks to\" we normally use a noun or noun phrase, not a full clause.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Small actions, fun experiments & motivation -->
                <div class="bg-white rounded-[4rem] p-10 md:p-16 shadow-2xl border-2 border-emerald-50">
                    <h3 class="text-3xl font-black text-slate-800 mb-8 flex items-center gap-4 text-emerald-500">
                        <i class="fas fa-shoe-prints"></i> Small twists that change routines
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <div class="bg-emerald-50 p-8 rounded-3xl border-2 border-emerald-100">
                            <p class="text-sm mb-3">
                                Many lessons on habits show how <span class="font-bold">little experiments</span> can motivate people to behave differently. [web:147][web:148][web:153]
                            </p>
                            <ul class="space-y-2 text-sm text-slate-700">
                                <li>‚Ä¢ A simple sound or light signal at an intersection can encourage pedestrians to take action and cross safely.</li>
                                <li>‚Ä¢ Turning the stairs into a fun activity can spark people‚Äôs curiosity and change their ordinary routine.</li>
                                <li>‚Ä¢ Once people feel the positive results, they are more likely to keep these new habits and improve their lives for the better.</li>
                            </ul>
                        </div>
                        <div class="p-8 bg-indigo-50 rounded-3xl border-2 border-indigo-100">
                            <p class="font-black text-indigo-900 mb-2 italic">Coach Janelle‚Äôs tip:</p>
                            <p class="text-indigo-800 text-sm leading-relaxed">
                                When you speak or write about change, combine <span class="font-bold">motivation verbs</span> (motivate, spark, promote, improve)  
                                with <span class="font-bold">choice expressions</span> (rather than, thanks to, take action).
                            </p>
                        </div>
                    </div>
                </div>

            </div>
        </section>

        <!-- QUIZ SECTION -->
        <section id="section-quiz" class="content-section hidden">
            <div id="quiz-container" class="max-w-4xl mx-auto py-10">
                <!-- Quiz dynamically injected here -->
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="max-w-6xl mx-auto mt-20 p-10 bg-white rounded-[4rem] shadow-xl flex flex-col md:flex-row gap-8 items-center border border-slate-50">
        <div class="w-24 h-24 bg-gradient-to-tr from-emerald-500 to-green-500 rounded-full flex-shrink-0 flex items-center justify-center text-white text-4xl shadow-xl">
            <i class="fas fa-user-graduate"></i>
        </div>
        <div>
            <h4 class="text-2xl font-black text-indigo-900 mb-2">Coach Janelle's Tip</h4>
            <p id="footer-tip" class="text-indigo-800 italic">
                "Change feels easier when it‚Äôs fun. Start with one small twist in your routine and see how it moves your life for the better."
            </p>
        </div>
    </footer>

    <script>
        // --- DATA: Review 2 ‚Äì Having Fun with Change ---

        const vocabulary = [
            {
                word: "positive",
                pos: "adj.",
                def: "Ê≠£Èù¢ÁöÑÔºõÁ©çÊ•µÁöÑÔºõÊ®ÇËßÄÁöÑ",
                family: "",
                example: "Mr. Lee, the new manager, has made many positive changes around the office, and all the workers look happier than before.",
                ch: "Êñ∞Á∂ìÁêÜÊùéÂÖàÁîüÂ∑≤Á∂ìÂú®Ëæ¶ÂÖ¨ÂÆ§Ë£°ÂÅö‰∫ÜË®±Â§öÊ≠£Èù¢ÁöÑÊîπËÆäÔºåËÄå‰∏îÊâÄÊúâÁöÑÂì°Â∑•ÁúãËµ∑‰æÜÈÉΩÊØî‰ª•ÂâçÂø´Ê®Ç„ÄÇ"
            },
            {
                word: "signal",
                pos: "n.",
                def: "ÊåáÁ§∫ÁáàËôü",
                family: "",
                example: "The driver ignored the red stop signal, and then his car crashed into another one.",
                ch: "ÈÇ£‰ΩçÈßïÈßõ‰∏çÁêÜÊúÉÁ¥ÖÁáàÂÅúÁöÑÁáàËôüÔºåÊé•Ëëó‰ªñÁöÑËªäÂ≠êÂ∞±Êíû‰∏äÂè¶Â§ñ‰∏ÄËºõËªä„ÄÇ"
            },
            {
                word: "improve",
                pos: "v.",
                def: "ÊîπÂñÑ",
                family: "improvement (n.)",
                example: "Michael knows that he has to improve his English before he studies abroad.",
                ch: "Michael Áü•ÈÅìÂú®‰ªñÂéªÂúãÂ§ñÂî∏Êõ∏ÂâçÂøÖÈ†àÂä†Âº∑‰ªñÁöÑËã±Êñá„ÄÇ"
            },
            {
                word: "intersection",
                pos: "n.",
                def: "ÂçÅÂ≠óË∑ØÂè£",
                family: "",
                example: "There was a car accident at the intersection of Lauren Road and Maple Street this morning.",
                ch: "‰ªäÂ§©Êó©‰∏äÂú®LaurenË∑ØËàáMapleË°óÁöÑÂçÅÂ≠óË∑ØÂè£ÊúâÂ†¥ËªäÁ¶ç„ÄÇ"
            },
            {
                word: "actually",
                pos: "adv.",
                def: "‰∫ãÂØ¶‰∏ä",
                family: "actual (adj.)",
                example: "Nicole loves writing stories about ghosts, even though she doesn‚Äôt actually believe in them.",
                ch: "NicoleÂñúÊÑõÂØ´ÈóúÊñºÈ¨ºÈ≠ÇÁöÑÊïÖ‰∫ãÔºåÈõñÁÑ∂‰∫ãÂØ¶‰∏äÂ•π‰∏¶‰∏çÁõ∏‰ø°ÂÆÉÂÄëÁöÑÂ≠òÂú®„ÄÇ"
            },
            {
                word: "booth",
                pos: "n.",
                def: "Â∞èÈöîÈñìÔºõÈõªË©±‰∫≠",
                family: "",
                example: "There are over 25,000 voting booths in this presidential election of the country.",
                ch: "ÈÄôÂúãÂÆ∂ÁöÑÈÄôÊ¨°Á∏ΩÁµ±Â§ßÈÅ∏Á∏ΩÂÖ±ÊúâË∂ÖÈÅéÂÖ©Ëê¨‰∫îÂçÉÂÄãÊäïÁ•®‰∫≠„ÄÇ"
            },
            {
                word: "pedestrian",
                pos: "n.",
                def: "Ë°å‰∫∫",
                family: "",
                example: "This area is only open for pedestrians on weekends.",
                ch: "ÈÄôÂÄãÂçÄÂüüÂú®ÈÄ±Êú´Âè™ÈñãÊîæÁµ¶Ë°å‰∫∫„ÄÇ"
            },
            {
                word: "routine",
                pos: "n./adj.",
                def: "Êó•Â∏∏‰∫ãÂãôÔºõ‰æãË°åÂÖ¨‰∫ãÔºõÊó•Â∏∏ÁöÑÔºõ‰æãË°åÁöÑ",
                family: "",
                example: "After Nancy‚Äôs long holiday, she had a lot of trouble getting back into her routine.",
                ch: "Âú®Èï∑ÂÅá‰πãÂæåÔºåNancyÂæàÈõ£ÂõûÂà∞Â•πÂπ≥Â∏∏ÁöÑË¶èÂæã„ÄÇ"
            },
            {
                word: "experiment",
                pos: "n.",
                def: "ÂòóË©¶ÔºõÂØ¶È©ó",
                family: "",
                example: "The painter mixed many paints together as an experiment to find the perfect color.",
                ch: "ÈÄô‰ΩçÁï´ÂÆ∂ÂòóË©¶Â∞áË®±Â§öÂ°óÊñôÊ∑∑Âú®‰∏ÄËµ∑Ôºå‰ª•ÊâæÂà∞ÂÆåÁæéÁöÑËâ≤ÂΩ©„ÄÇ"
            },
            {
                word: "twist",
                pos: "n./v.",
                def: "ËΩâÊäòÔºõËΩâËÆäÔºõÊâ≠ËΩâ",
                family: "",
                example: "The movie was filled with surprising twists, but of course the main character won in the end.",
                ch: "ÈÄôÈÉ®ÈõªÂΩ±ÂÖÖÊªø‰ª§‰∫∫È©öË®ùÁöÑËΩâÊäòÔºå‰ΩÜÊòØ‰∏ªËßíÁï∂ÁÑ∂ÈÇÑÊòØÂú®ÊúÄÂæåÁç≤Âãù‰∫Ü„ÄÇ"
            },
            {
                word: "conduct",
                pos: "v.",
                def: "ÂÅöÔºàÂØ¶È©ó„ÄÅÁ†îÁ©∂„ÄÅË™øÊü•Á≠âÔºâ",
                family: "",
                example: "The government is conducting a survey to find out if people are happy with the national health care system.",
                ch: "ÊîøÂ∫úÊ≠£Âú®ÂÅö‰∏ÄÈ†ÖË™øÊü•‰ª•‰∫ÜËß£‰∫∫ÂÄëÊòØÂê¶Â∞çÂúãÂÆ∂ÁöÑÂÅ•‰øùÂà∂Â∫¶ÊÑüÂà∞ÊªøÊÑè„ÄÇ"
            },
            {
                word: "goal",
                pos: "n.",
                def: "ÁõÆÊ®ô",
                family: "",
                example: "After two years of training, Sandra finally achieved her goal of riding a bicycle around Taiwan.",
                ch: "Âú®Á∂ìÈÅéÂÖ©Âπ¥ÁöÑË®ìÁ∑¥‰πãÂæåÔºåSandraÁµÇÊñºÈÅîÊàêÂ•πÈ®éËÖ≥Ë∏èËªäÁí∞Â≥∂Ëá∫ÁÅ£ÁöÑÁõÆÊ®ô„ÄÇ"
            },
            {
                word: "escalator",
                pos: "n.",
                def: "ÈõªÊâ∂Ê¢Ø",
                family: "",
                example: "You can take the escalator to the top floor and you‚Äôll see a stunning infinity pool.",
                ch: "‰Ω†ÂèØ‰ª•Êê≠‰πòÊâãÊâ∂Ê¢ØÂà∞È†ÇÊ®ìÔºåÂ∞±ÊúÉÁúãÂà∞ÂæàÈ©ö‰∫∫ÁöÑÁÑ°ÈÇäÈöõÊ≥≥Ê±†„ÄÇ"
            },
            {
                word: "ordinary",
                pos: "adj.",
                def: "ÊôÆÈÄöÁöÑ",
                family: "",
                example: "Many ordinary people don‚Äôt floss their teeth every day, even though dentists recommend it.",
                ch: "Âç≥‰ΩøÁâôÈÜ´Âª∫Ë≠∞Ôºå‰ΩÜË®±Â§ö‰∫∫‰ªç‰∏çÊúÉÊØèÂ§©‰ΩøÁî®ÁâôÁ∑ö„ÄÇ"
            },
            {
                word: "motivate",
                pos: "v.",
                def: "ÊøÄÂãµÔºõÈºìÂãµ",
                family: "motivation (n.)",
                example: "A serious illness motivated Jean to start eating healthier foods and getting more exercise.",
                ch: "‰∏ÄÂ†¥Âö¥ÈáçÁöÑÁñæÁóÖÊøÄÂãµJeanÈñãÂßãÂêÉÊõ¥ÂÅ•Â∫∑ÁöÑÈ£üÁâ©Ë∑üÂÅöÊõ¥Â§öÁöÑÈÅãÂãï„ÄÇ"
            },
            {
                word: "spark",
                pos: "n.",
                def: "ÁÅ´Ëä±",
                family: "",
                example: "This singer‚Äôs latest album seems to lack some of his creative sparks.",
                ch: "ÈÄô‰ΩçÊ≠åÊâãÁöÑÊúÄÊñ∞Â∞àËºØ‰ºº‰πéÊ¨†Áº∫‰∫Ü‰∏Ä‰∫õ‰ªñÁöÑÂâµÊÑèÁÅ´Ëä±„ÄÇ"
            },
            {
                word: "activity",
                pos: "n.",
                def: "Ê¥ªÂãï",
                family: "",
                example: "Garrett loves doing outdoor activities such as hiking, climbing, and swimming on weekends.",
                ch: "GarrettÂñúÊÑõÈÄ≤Ë°åÊà∂Â§ñÊ¥ªÂãïÔºåÂÉèÊòØÂú®ÈÄ±Êú´ÂÅ•Ë°å„ÄÅÁôªÂ±±ÂíåÊ∏∏Ê≥≥„ÄÇ"
            },
            {
                word: "promote",
                pos: "v.",
                def: "‰øÉÈÄ≤ÔºõÊôâÂçá",
                family: "promotion (n.)",
                example: "This organization promotes basic human rights such as the right to free speech.",
                ch: "ÈÄôÂÄãÁµÑÁπî‰øÉÈÄ≤Âü∫Êú¨‰∫∫Ê¨äÔºåÂÉèÊòØËá™Áî±Ë®ÄË´ñÁöÑÊ¨äÂà©„ÄÇ"
            }
        ];

        const idioms = [
            { phrase: "for the better", def: "Â•ΩËΩâ", example: "After his wife left him, Trevor changed his life for the better by stopping drinking." },
            { phrase: "take action", def: "Êé°ÂèñË°åÂãï", example: "Instead of just talking about fighting global warming, we need to take action and make a difference." },
            { phrase: "put up", def: "Ë®≠Á´ãÔºõË®≠ÁΩÆ", example: "A sign was put up in the window to tell people that the tea shop is closed every Monday." },
            { phrase: "thanks to", def: "Âπ∏Ëôß", example: "Thanks to his father‚Äôs encouragement, Patrick improved his basketball skills and became a member of the school team." },
            { phrase: "rather than", def: "ËÄåÈùû", example: "Rather than typing a new party invitation for each friend, Yolanda just copied and pasted the message several times." }
        ];

        // Quiz questions ‚Äì habits, change, reason/result expressions
        const quizQuestions = [
            {
                type: "mc",
                q: "Which sentence best explains the main idea of \"Having Fun with Change\"?",
                options: [
                    "Change is always dangerous and should be avoided.",
                    "Small, fun experiments can motivate ordinary people to change their routines for the better.",
                    "Only big goals can improve people‚Äôs lives.",
                    "Pedestrians never change their behavior unless the government forces them to."
                ],
                correct: 1,
                explanation: "The unit shows how little experiments at places like escalators can spark positive changes in everyday habits. [web:147][web:153]"
            },
            {
                type: "mc",
                q: "Which sentence uses \"thanks to\" correctly?",
                options: [
                    "Thanks to he take action, the intersection is safer.",
                    "Thanks to that people used the stairs, the experiment was success.",
                    "Thanks to a simple change in the signal, more pedestrians started crossing safely.",
                    "Thanks to conduct an experiment, they improved their routine."
                ],
                correct: 2,
                explanation: "\"Thanks to + noun phrase\" introduces a positive reason for a result."
            },
            {
                type: "error",
                q: "Which part is wrong? \"Ordinary people often choose taking the escalator rather than walk up the stairs.\"",
                options: ["Ordinary people", "choose taking", "rather than", "walk up"],
                correct: 1,
                fix: "choose to take",
                explanation: "\"Choose to do\" is more natural than \"choose doing\" in this sentence."
            },
            {
                type: "mc",
                q: "Which sentence best contrasts two choices with \"rather than\"?",
                options: [
                    "People used the escalator rather than they used the stairs.",
                    "People used the escalator rather than to use the stairs.",
                    "People used the stairs rather than the escalator when the stairs became a fun activity.",
                    "People used stairs rather than they use escalator."
                ],
                correct: 2,
                explanation: "\"Rather than\" is followed by a noun or verb phrase that clearly shows the second option."
            },
            {
                type: "type",
                q: "Complete the sentence: \"The government ______ a survey to see if the new signals improved safety at the intersection.\"",
                answer: "conducted",
                hint: "c _ n d _ c t _ d",
                explanation: "\"Conducted\" is the past tense of \"conduct\", used for surveys and experiments."
            },
            {
                type: "mc",
                q: "Which sentence best shows a positive result using \"for the better\"?",
                options: [
                    "People changed the signals for the better red.",
                    "People changed the signals, and traffic became different.",
                    "People changed their routines for the better after they saw how fun the stairs were.",
                    "People changed their routines for the better than before."
                ],
                correct: 2,
                explanation: "\"For the better\" means that the change had a positive effect on their lives."
            },
            {
                type: "error",
                q: "Which word form is wrong? \"Their experiment was a great motivate for people to walk more.\"",
                options: ["experiment", "great", "motivate", "walk more"],
                correct: 2,
                fix: "motivation",
                explanation: "We need the noun \"motivation\" after \"great\" here."
            },
            {
                type: "mc",
                q: "Which sentence best fits the unit‚Äôs idea of fun experiments?",
                options: [
                    "They put up a boring sign at the escalator, so nobody changed.",
                    "They put up a playful piano staircase, and the sound sparked people‚Äôs interest in using the stairs.",
                    "They put up a booth to sell tickets.",
                    "They put up a wall at the intersection."
                ],
                correct: 1,
                explanation: "A playful twist (like a piano staircase) is more likely to motivate positive change. [web:147][web:153]"
            },
            {
                type: "type",
                q: "Complete the sentence: \"My goal is to add one healthy ______ to my daily routine, such as walking to school.\"",
                answer: "activity",
                hint: "a _ t _ v _ t y",
                explanation: "\"Activity\" fits with goals, routine, and health."
            },
            {
                type: "mc",
                q: "Which option completes the sentence in the most natural way? \"We need to stop just talking about change and finally ______ to improve our lives.\"",
                options: ["take action", "for the better", "rather than", "thanks to"],
                correct: 0,
                explanation: "\"Take action\" means to start doing something, not only talking about it."
            }
        ];

        // --- STATE ---
        let currentVocabIdx = 0;
        let currentQuizIdx = 0;
        let score = 0;
        let canAnswer = true;

        // --- VOCABULARY LOGIC ---
        function updateVocabUI() {
            const item = vocabulary[currentVocabIdx];
            document.getElementById('vocab-number').innerText = currentVocabIdx + 1;
            document.getElementById('vocab-pos').innerText = item.pos;
            document.getElementById('vocab-word').innerText = item.word;
            document.getElementById('vocab-def').innerText = item.def;
            document.getElementById('vocab-example').innerText = `"${item.example}"`;
            document.getElementById('vocab-ch').innerText = item.ch;
            document.getElementById('vocab-counter').innerText = `${currentVocabIdx + 1} / ${vocabulary.length}`;
            document.getElementById('vocab-family').innerText = item.family ? `Word family: ${item.family}` : "";
            
            document.getElementById('vocab-example-container').classList.add('hidden');
            document.getElementById('btn-reveal').classList.remove('hidden');
            document.getElementById('vocab-card').classList.remove('bg-emerald-50');
        }

        function nextVocab() {
            currentVocabIdx = (currentVocabIdx + 1) % vocabulary.length;
            updateVocabUI();
        }

        function prevVocab() {
            currentVocabIdx = (currentVocabIdx - 1 + vocabulary.length) % vocabulary.length;
            updateVocabUI();
        }

        function revealExample() {
            document.getElementById('vocab-example-container').classList.remove('hidden');
            document.getElementById('btn-reveal').classList.add('hidden');
            document.getElementById('vocab-card').classList.add('bg-emerald-50');
        }

        function loadIdioms() {
            const list = document.getElementById('idioms-list');
            list.innerHTML = idioms.map(item => `
                <div class="p-4 bg-slate-50 rounded-2xl hover:bg-emerald-50 transition-all">
                    <p class="font-black text-emerald-600">${item.phrase}</p>
                    <p class="text-xs text-slate-400 mb-1">${item.def}</p>
                    <p class="text-xs text-slate-500 italic">"${item.example}"</p>
                </div>
            `).join('');
        }

        // --- TAB LOGIC ---
        function switchTab(tab) {
            document.querySelectorAll('.content-section').forEach(s => s.classList.add('hidden'));
            document.querySelectorAll('.tab-btn').forEach(b => {
                b.className = "tab-btn flex items-center gap-3 py-4 px-8 rounded-full border-2 font-black transition-all duration-300 shadow-sm bg-white text-slate-500 border-slate-100";
            });

            document.getElementById(`section-${tab}`).classList.remove('hidden');
            document.getElementById(`btn-${tab}`).classList.add(`tab-active-${tab}`);

            if (tab === 'quiz') startQuiz();
        }

        // --- QUIZ LOGIC ---
        function startQuiz() {
            currentQuizIdx = 0;
            score = 0;
            renderQuestion();
        }

        function renderQuestion() {
            canAnswer = true;
            const container = document.getElementById('quiz-container');
            const q = quizQuestions[currentQuizIdx];

            let content = `
                <div class="bg-white rounded-[4rem] shadow-2xl border-2 border-pink-100 min-h-[500px] flex flex-col overflow-hidden fade-in">
                    <div class="bg-slate-50 p-6 flex justify-between border-b">
                        <div class="flex items-center gap-3">
                            <div class="bg-pink-500 text-white w-10 h-10 rounded-xl flex items-center justify-center font-black">${currentQuizIdx + 1}</div>
                            <p class="text-sm font-bold text-slate-700">Question ${currentQuizIdx + 1} of ${quizQuestions.length}</p>
                        </div>
                        <p class="text-lg font-black text-pink-600">Score: ${score}</p>
                    </div>
                    <div class="p-10 md:p-16 flex-grow flex flex-col justify-center">
                        <h2 class="text-2xl md:text-3xl font-black text-slate-800 text-center mb-12">${q.q}</h2>
            `;

            if (q.type === 'mc' || q.type === 'error') {
                content += `<div class="grid grid-cols-1 md:grid-cols-2 gap-4">`;
                q.options.forEach((opt, idx) => {
                    content += `<button id="opt-${idx}" onclick="handleAnswer(${idx})" class="quiz-opt p-6 rounded-3xl font-black text-left border-2 bg-white border-slate-100 text-slate-600 hover:border-pink-300 transition-all">${opt}</button>`;
                });
                content += `</div>`;
            } else {
                content += `
                    <div class="space-y-6 max-w-xl mx-auto w-full">
                        <div class="text-center text-pink-300 font-black tracking-widest text-2xl uppercase mb-2">${q.hint}</div>
                        <input type="text" id="type-input" class="w-full text-center text-3xl font-black p-6 bg-slate-50 rounded-3xl border-4 border-dashed border-pink-100 focus:outline-none focus:border-pink-500" placeholder="...">
                        <button id="type-submit-btn" onclick="handleTypeAnswer()" class="w-full bg-indigo-900 text-white py-6 rounded-3xl font-black text-xl hover:bg-indigo-800 transition-all">SUBMIT</button>
                    </div>
                `;
            }

            content += `
                    <div id="feedback" class="mt-8 hidden p-6 rounded-3xl animate-in fade-in zoom-in duration-300">
                        <p id="feedback-text" class="text-2xl font-black mb-2"></p>
                        <div id="explanation-box" class="text-sm md:text-base font-medium text-slate-600 border-t border-slate-200 pt-4 mt-2"></div>
                    </div>
                </div></div>
            `;
            container.innerHTML = content;
        }

        function handleAnswer(idx) {
            if (!canAnswer) return;
            canAnswer = false;

            const q = quizQuestions[currentQuizIdx];
            const isCorrect = idx === q.correct;
            
            const btn = document.getElementById(`opt-${idx}`);
            if (isCorrect) {
                btn.classList.add('option-correct');
            } else {
                btn.classList.add('option-wrong');
                document.getElementById(`opt-${q.correct}`).classList.add('option-correct');
            }

            showFeedback(isCorrect);
        }

        function handleTypeAnswer() {
            if (!canAnswer) return;
            canAnswer = false;

            const input = document.getElementById('type-input');
            const val = input.value.trim().toLowerCase();
            const q = quizQuestions[currentQuizIdx];
            const isCorrect = val === q.answer.toLowerCase();
            
            if (isCorrect) {
                input.classList.add('text-green-600', 'border-green-500');
            } else {
                input.classList.add('text-red-600', 'border-red-500');
                if (val) {
                    input.value = `${val} ‚ûî ${q.answer}`;
                } else {
                    input.value = q.answer;
                }
            }

            showFeedback(isCorrect);
        }

        function showFeedback(isCorrect) {
            if (isCorrect) score++;
            
            const q = quizQuestions[currentQuizIdx];
            const fb = document.getElementById('feedback');
            const fbText = document.getElementById('feedback-text');
            const fbExp = document.getElementById('explanation-box');

            fb.classList.remove('hidden');
            fb.classList.add(isCorrect ? 'bg-green-50' : 'bg-red-50');
            fbText.innerText = isCorrect ? "üéØ Well done!" : "üí° Take another look";
            fbText.className = `text-2xl font-black mb-2 ${isCorrect ? 'text-green-600' : 'text-red-600'}`;
            
            let explanationHTML = `<strong>Explanation:</strong> ${q.explanation || ''}`;
            if (q.fix) explanationHTML = `<strong>Correction:</strong> <span class="text-red-600 underline">${q.fix}</span><br>${explanationHTML}`;
            
            fbExp.innerHTML = explanationHTML;

            setTimeout(() => {
                currentQuizIdx++;
                if (currentQuizIdx < quizQuestions.length) renderQuestion();
                else renderResults();
            }, 4000);
        }

        function getEncouragement(s) {
            if (s === quizQuestions.length) return { title: "Review Master! üèÜ", msg: "You can now talk about change, motivation, and small experiments in clear, natural English.", color: "text-yellow-600", icon: "rocket" };
            if (s >= 7) return { title: "Excellent Work! ‚ú®", msg: "You control the key words and expressions for talking about positive life changes.", color: "text-green-600", icon: "sparkles" };
            if (s >= 4) return { title: "Nice Progress! üí™", msg: "Review the idioms and motivation verbs, then try the challenge again to build automaticity.", color: "text-orange-600", icon: "smile" };
            return { title: "Keep Practicing! üå±", msg: "Focus on a few expressions like \"thanks to\" and \"rather than\"‚Äîthey will help you describe your own goals and routines.", color: "text-blue-600", icon: "heart" };
        }

        function renderResults() {
            const enc = getEncouragement(score);
            const container = document.getElementById('quiz-container');
            container.innerHTML = `
                <div class="bg-white rounded-[4rem] p-10 md:p-16 text-center shadow-2xl border-4 border-indigo-50 fade-in">
                    <div class="flex justify-center mb-6">
                        <i class="fas fa-${enc.icon} fa-5x text-yellow-500 drop-shadow-lg"></i>
                    </div>
                    <h2 class="text-5xl font-black mb-4 ${enc.color}">${enc.title}</h2>
                    <p class="text-2xl font-bold text-slate-700 mb-6">You scored <span class="text-indigo-600">${score}</span> / ${quizQuestions.length}</p>
                    <div class="bg-slate-50 p-8 rounded-3xl border-2 border-slate-100 mb-10 max-w-2xl mx-auto italic text-slate-600 text-lg">
                        "${enc.msg}"
                    </div>
                    <button onclick="startQuiz()" class="bg-slate-900 text-white px-12 py-6 rounded-3xl font-black hover:scale-105 transition-all shadow-xl flex items-center gap-3 mx-auto">
                        <i class="fas fa-redo"></i> RETRY CHALLENGE
                    </button>
                </div>
            `;
        }

        // --- INIT ---
        window.onload = () => {
            updateVocabUI();
            loadIdioms();
        };
    </script>
</body>
</html>
