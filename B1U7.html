<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Level Up: From Trash to Triumph | B1U7 Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap');
        
        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background: linear-gradient(135deg, #f8fafc 0%, #ffffff 50%, #fef3c7 100%);
            min-height: 100vh;
        }

        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background-color: #e2e8f0;
            border-radius: 10px;
        }

        .tab-active-vocab { background-color: #f97316; color: white; border-color: #fb923c; }
        .tab-active-grammar { background-color: #4f46e5; color: white; border-color: #818cf8; }
        .tab-active-quiz { background-color: #ec4899; color: white; border-color: #f472b6; }
        
        .fade-in { animation: fadeIn 0.5s ease-out; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .option-correct { border-color: #22c55e !important; background-color: #f0fdf4 !important; color: #15803d !important; }
        .option-wrong { border-color: #ef4444 !important; background-color: #fef2f2 !important; color: #b91c1c !important; }
    </style>
</head>
<body class="p-4 md:p-8">

    <!-- Header -->
    <header class="max-w-6xl mx-auto mb-8 flex flex-col md:flex-row md:items-center justify-between gap-6">
        <div class="fade-in">
            <div class="flex items-center gap-3 mb-2">
                <div class="bg-orange-500 p-2 rounded-xl shadow-lg rotate-3 text-white">
                    <i class="fas fa-music fa-2x"></i>
                </div>
                <h1 class="text-3xl md:text-4xl font-black bg-gradient-to-r from-amber-500 via-pink-500 to-indigo-600 bg-clip-text text-transparent">
                    Level Up: From Trash to Triumph
                </h1>
            </div>
            <p class="text-slate-500 font-medium flex items-center gap-2">
                <i class="fas fa-bullseye text-orange-400"></i> B1 Reading & Vocabulary Dashboard ‚Äì Unit 7
            </p>
        </div>
        
        <div class="flex items-center gap-4 bg-white p-4 rounded-[2rem] shadow-xl border-2 border-orange-100">
            <div class="relative">
                <div class="w-14 h-14 bg-gradient-to-tr from-orange-400 to-pink-500 rounded-full flex items-center justify-center text-white shadow-lg border-2 border-white">
                    <i class="fas fa-user-tie fa-2xl"></i>
                </div>
                <div class="absolute -bottom-1 -right-1 bg-green-400 w-4 h-4 rounded-full border-2 border-white"></div>
            </div>
            <div>
                <p class="text-[10px] text-slate-400 uppercase font-black tracking-widest leading-none mb-1">Coach Janelle</p>
                <p class="font-black text-indigo-900 text-lg">Online Now ‚ú®</p>
            </div>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="max-w-6xl mx-auto mb-10 flex flex-wrap justify-center gap-4">
        <button onclick="switchTab('vocab')" id="btn-vocab" class="tab-btn flex items-center gap-3 py-4 px-8 rounded-full border-2 font-black transition-all duration-300 shadow-sm bg-white text-slate-500 border-slate-100 tab-active-vocab">
            <i class="fas fa-brain"></i> B1 Lexicon
        </button>
        <button onclick="switchTab('grammar')" id="btn-grammar" class="tab-btn flex items-center gap-3 py-4 px-8 rounded-full border-2 font-black transition-all duration-300 shadow-sm bg-white text-slate-500 border-slate-100">
            <i class="fas fa-pen-nib"></i> Master Patterns
        </button>
        <button onclick="switchTab('quiz')" id="btn-quiz" class="tab-btn flex items-center gap-3 py-4 px-8 rounded-full border-2 font-black transition-all duration-300 shadow-sm bg-white text-slate-500 border-slate-100">
            <i class="fas fa-trophy"></i> Ultimate Challenge
        </button>
    </nav>

    <!-- Content Sections -->
    <main class="max-w-6xl mx-auto">
        
        <!-- VOCABULARY SECTION -->
        <section id="section-vocab" class="content-section">
            <div class="grid grid-cols-1 lg:grid-cols-12 gap-8 items-start">
                <div class="lg:col-span-8 flex flex-col items-center">
                    <div id="vocab-card" class="w-full bg-white rounded-[3rem] shadow-2xl border-b-[12px] border-orange-400 p-10 md:p-16 text-center relative overflow-hidden transition-all duration-500">
                        <div id="vocab-number" class="absolute top-8 right-12 text-orange-100 font-black text-8xl select-none opacity-40">1</div>
                        <div class="relative z-10">
                            <div id="vocab-pos" class="inline-block px-4 py-1 rounded-full bg-orange-100 text-orange-600 font-black text-xs uppercase tracking-widest mb-3">n.</div>
                            <h2 id="vocab-word" class="text-4xl md:text-5xl font-black text-slate-800 tracking-tighter mb-1">triumph</h2>
                            <h3 id="vocab-def" class="text-xl font-bold text-slate-500 mb-2">ÂãùÂà©ÔºõÊàêÂ∞±ÔºõÔºàÂõ†ÂãùÂà©ËÄåÁî¢ÁîüÁöÑÔºâÂñúÊÇÖÔºõÂæóÊÑè</h3>
                            <p id="vocab-family" class="text-sm md:text-base text-slate-500 mb-6 italic"></p>
                            
                            <div id="vocab-example-container" class="hidden animate-in fade-in duration-500 max-w-2xl mx-auto text-left">
                                <div class="p-6 bg-white rounded-3xl border-2 border-orange-200 shadow-inner">
                                    <p id="vocab-example" class="text-lg text-slate-700 font-medium mb-4 italic"></p>
                                    <p id="vocab-ch" class="text-slate-400 font-medium"></p>
                                </div>
                            </div>
                            <button id="btn-reveal" onclick="revealExample()" class="mt-4 bg-orange-500 text-white px-8 py-4 rounded-2xl font-black hover:bg-orange-600 transition-all shadow-lg">REVEAL CONTEXT</button>
                        </div>
                    </div>
                    <div class="flex items-center gap-6 mt-10">
                        <button onclick="prevVocab()" class="w-16 h-16 rounded-3xl bg-white shadow-xl flex items-center justify-center text-slate-400 hover:text-orange-500 transition-all border border-slate-50"><i class="fas fa-chevron-left fa-2x"></i></button>
                        <div id="vocab-counter" class="bg-white px-8 py-4 rounded-3xl font-black text-2xl text-slate-700 shadow-lg">1 / 17</div>
                        <button onclick="nextVocab()" class="w-16 h-16 rounded-3xl bg-orange-500 shadow-xl flex items-center justify-center text-white hover:bg-orange-600 transition-all"><i class="fas fa-chevron-right fa-2x"></i></button>
                    </div>
                </div>
                <div class="lg:col-span-4 bg-white p-6 rounded-[2.5rem] shadow-xl border border-slate-100">
                    <h3 class="text-2xl font-black text-slate-800 mb-6 flex items-center gap-2"><i class="fas fa-heart text-pink-500"></i> Phrases</h3>
                    <div id="idioms-list" class="space-y-3 max-h-[500px] overflow-y-auto pr-2 custom-scrollbar">
                        <!-- Idioms injected here -->
                    </div>
                </div>
            </div>
        </section>

        <!-- GRAMMAR SECTION -->
        <section id="section-grammar" class="content-section hidden">
            <div class="space-y-10 fade-in">
                <!-- Focus: S + have + O + p.p. (causative) -->
                <div class="bg-gradient-to-br from-indigo-900 to-amber-900 rounded-[4rem] p-10 md:p-16 text-white shadow-2xl">
                    <h2 class="text-3xl md:text-4xl font-black mb-6">have + O + p.p.</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-10">
                        <div class="bg-white/10 p-8 rounded-[2rem] border border-white/20">
                            <h4 class="font-black text-amber-300 flex items-center gap-2 mb-4">
                                <i class="fas fa-lightbulb"></i> Getting things done
                            </h4>
                            <p class="mb-4 text-sm md:text-base">
                                We use <span class="text-amber-300 font-bold">have + object + past participle</span> when we arrange for someone else to do something for us,  
                                or when we want to focus on the result rather than the person who did the work. [web:97]
                            </p>
                            <ul class="space-y-2 text-sm">
                                <li>‚Ä¢ With the money they earned, Ada and her friends <span class="text-amber-300 font-bold">had larger, safer houses built</span> for their families.</li>
                                <li>‚Ä¢ The orchestra might <span class="text-amber-300 font-bold">have old instruments repaired</span> instead of buying new ones.</li>
                                <li>‚Ä¢ Some charities <span class="text-amber-300 font-bold">have posters designed</span> to encourage people to recycle more.</li>
                            </ul>
                        </div>
                        <div class="space-y-4">
                            <h4 class="font-black text-2xl">Common problems</h4>
                            <div class="p-5 bg-indigo-700/50 rounded-2xl border border-indigo-500/30 text-sm">
                                <p><span class="text-red-300 font-black">‚úó</span> They had larger, safer houses <span class="underline">to build</span> for their families.</p>
                                <p><span class="text-green-300 font-black">‚úì</span> They <span class="underline">had larger, safer houses built</span> for their families.</p>
                                <p class="mt-1 text-indigo-100 text-xs">
                                    After <span class="font-bold">have</span>, we use the object and a past participle (built, made, repaired), not \"to\" + verb.
                                </p>
                            </div>
                            <div class="p-5 bg-indigo-700/50 rounded-2xl border border-indigo-500/30 text-sm">
                                <p><span class="text-red-300 font-black">‚úó</span> She had the kids practiced for hours every day.</p>
                                <p><span class="text-green-300 font-black">‚úì</span> She had the kids <span class="underline">practice</span> for hours every day.</p>
                                <p class="mt-1 text-indigo-100 text-xs">
                                    Be careful: <span class="font-bold">have + O + V</span> (active) is different from <span class="font-bold">have + O + p.p.</span> (passive result).  
                                    Both appear in stories like Ada‚Äôs.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Linking determination, faith, pursuit & triumph -->
                <div class="bg-white rounded-[4rem] p-10 md:p-16 shadow-2xl border-2 border-amber-50">
                    <h3 class="text-3xl font-black text-slate-800 mb-8 flex items-center gap-4 text-orange-500">
                        <i class="fas fa-star"></i> From slum to stage
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <div class="bg-orange-50 p-8 rounded-3xl border-2 border-orange-100">
                            <p class="text-sm mb-3">
                                This unit is full of abstract nouns that work well together in sentences about success.
                            </p>
                            <ul class="space-y-2 text-sm text-slate-700">
                                <li>‚Ä¢ With tons of determination and encouragement, the kids were able to pursue their musical dreams.</li>
                                <li>‚Ä¢ Their concerts dazzled audiences and showed the world their potential.</li>
                                <li>‚Ä¢ What came out of the slum was not just music, but a triumph of faith and hard work. [web:113][web:115]</li>
                            </ul>
                        </div>
                        <div class="p-8 bg-indigo-50 rounded-3xl border-2 border-indigo-100">
                            <p class="font-black text-indigo-900 mb-2 italic">Coach Janelle‚Äôs tip:</p>
                            <p class="text-indigo-800 text-sm leading-relaxed">
                                Try putting one strong verb (pursue, dazzle, determine) together with one abstract noun (potential, faith, triumph)  
                                when you talk about Ada‚Äôs story or your own goals.
                            </p>
                        </div>
                    </div>
                </div>

            </div>
        </section>

        <!-- QUIZ SECTION -->
        <section id="section-quiz" class="content-section hidden">
            <div id="quiz-container" class="max-w-4xl mx-auto py-10">
                <!-- Quiz dynamically injected here -->
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="max-w-6xl mx-auto mt-20 p-10 bg-white rounded-[4rem] shadow-xl flex flex-col md:flex-row gap-8 items-center border border-slate-50">
        <div class="w-24 h-24 bg-gradient-to-tr from-pink-500 to-orange-400 rounded-full flex-shrink-0 flex items-center justify-center text-white text-4xl shadow-xl">
            <i class="fas fa-user-graduate"></i>
        </div>
        <div>
            <h4 class="text-2xl font-black text-indigo-900 mb-2">Coach Janelle's Tip</h4>
            <p id="footer-tip" class="text-indigo-800 italic">
                "Real triumph often comes out of trash ‚Äî not just garbage, but difficult situations. Show that whole journey in your sentences."
            </p>
        </div>
    </footer>

    <script>
        // --- DATA: B1 U7 From Trash to Triumph ---

        const vocabulary = [
            {
                word: "triumph",
                pos: "n.",
                def: "ÂãùÂà©ÔºõÊàêÂ∞±ÔºõÔºàÂõ†ÂãùÂà©ËÄåÁî¢ÁîüÁöÑÔºâÂñúÊÇÖÔºõÂæóÊÑè",
                family: "",
                example: "The soccer team‚Äôs moment of triumph came when the final goal was scored.",
                ch: "ÈÇ£ÊîØË∂≥ÁêÉÈöäÂú®ÈÄ≤‰∫ÜÊúÄÂæå‰∏ÄÁêÉÊôÇÔºåËøé‰æÜ‰∫Ü‰ªñÂÄëÁöÑÂãùÂà©ÊôÇÂàª„ÄÇ"
            },
            {
                word: "apply",
                pos: "v.",
                def: "Áî≥Ë´ãÔºõÂ†±Âêç",
                family: "application (n.), applicant (n.)",
                example: "To apply for the job, Mary had to fill out several forms and send them to the company.",
                ch: "MaryÁÇ∫‰∫ÜÁî≥Ë´ãÈÄô‰ªΩÂ∑•‰ΩúÔºåÂøÖÈ†àÂ°´ÂØ´Â•ΩÂπæ‰ªΩË°®Ê†º‰∏¶ÂØÑÁµ¶ÈÄôÂÆ∂ÂÖ¨Âè∏„ÄÇ"
            },
            {
                word: "instrument",
                pos: "n.",
                def: "Ê®ÇÂô®ÔºõÂÑÄÂô®ÔºõÂô®ÂÖ∑",
                family: "",
                example: "Harry can play several instruments, such as the piano and the trumpet.",
                ch: "HarryËÉΩÊºîÂ•èÂ•ΩÂπæÁ®ÆÊ®ÇÂô®ÔºåÊØîÂ¶ÇÈãºÁê¥ÂíåÂ∞èËôü„ÄÇ"
            },
            {
                word: "somehow",
                pos: "adv.",
                def: "‰ª•ÊüêÁ®ÆÊñπÂºèÔºõ‰∏çÁü•ÊÄéÈ∫ºÂú∞",
                family: "",
                example: "When Gina lost her keys, her dog somehow knew exactly where to find them.",
                ch: "Áï∂GinaÂºÑ‰∏üÂ•πÁöÑÈë∞ÂåôÊôÇÔºåÂ•πÁöÑÁãó‰∏çÁü•ÊÄéÈ∫ºÂú∞Ê∫ñÁ¢∫Âú∞Áü•ÈÅìÂú®Âì™Ë£°ÊâæÂà∞ÂÆÉÂÄë„ÄÇ"
            },
            {
                word: "barely",
                pos: "adv.",
                def: "Âπæ‰πé‰∏ç",
                family: "bare (adj.)",
                example: "Justin and Kate could barely believe their ears when the doctor told them they were going to have twins.",
                ch: "Áï∂ÈÜ´ÁîüÂëäË®¥JustinÂíåKate‰ªñÂÄëÂ∞áÊúÉÊúâÈõôËÉûËÉéÊôÇÔºå‰ªñÂÄëÂπæ‰πé‰∏çÊï¢Áõ∏‰ø°Ëá™Â∑±ÁöÑËÄ≥Êúµ„ÄÇ"
            },
            {
                word: "invaluable",
                pos: "adj.",
                def: "ÈùûÂ∏∏ÂØ∂Ë≤¥ÁöÑ",
                family: "",
                example: "Eric‚Äôs grandma has a lot of life experience, so her advice is invaluable to him.",
                ch: "EricÁöÑÁ•ñÊØçÊìÅÊúâË±êÂØåÁöÑ‰∫∫ÁîüÁ∂ìÈ©óÔºåÊâÄ‰ª•Â•πÁöÑÂª∫Ë≠∞Â∞ç‰ªñ‰æÜË™™ÈùûÂ∏∏ÂØ∂Ë≤¥„ÄÇ"
            },
            {
                word: "encouragement",
                pos: "n.",
                def: "ÈºìÂãµÔºõÈºìËàû",
                family: "encourage (v.), discourage (v.)",
                example: "My mom‚Äôs encouragement helped me feel less nervous before the school play.",
                ch: "ÊàëÂ™ΩÂ™ΩÁöÑÈºìÂãµÂπ´Âä©ÊàëÂú®Â≠∏Ê†°Êà≤ÂäáË°®ÊºîÂâçÊÑüÂà∞‰∏çÈÇ£È∫ºÁ∑äÂºµ„ÄÇ"
            },
            {
                word: "concert",
                pos: "n.",
                def: "Èü≥Ê®ÇÊúÉ",
                family: "",
                example: "Tom and Karen went to a classical concert to celebrate one year of marriage.",
                ch: "TomÂíåKarenÂéªÂèÉÂä†‰∫Ü‰∏ÄÂ†¥Âè§ÂÖ∏Èü≥Ê®ÇÊúÉÔºå‰ª•ÊÖ∂Á•ù‰ªñÂÄëÁµêÂ©ö‰∏ÄÂë®Âπ¥„ÄÇ"
            },
            {
                word: "receive",
                pos: "v.",
                def: "Êî∂Âà∞ÔºõÁç≤Âæó",
                family: "",
                example: "Andy received a pair of gloves from his girlfriend as a Christmas gift.",
                ch: "AndyÂæû‰ªñÂ•≥ÊúãÂèãÈÇ£Ë£°Êî∂Âà∞‰∫Ü‰∏ÄÈõôÊâãÂ•ó‰ΩúÁÇ∫ËÅñË™ïÁ¶ÆÁâ©„ÄÇ"
            },
            {
                word: "dazzle",
                pos: "v.",
                def: "‰ΩøËÆöÂòÜÔºõ‰ΩøÂÇæÂÄíÔºõÔºàÂº∑ÂÖâÔºâ‰ΩøÁõÆÁú©Ôºõ‰ΩøÁúºËä±",
                family: "",
                example: "During his performance, the guitar player dazzled the audience with his unbelievable skills.",
                ch: "Âú®‰ªñÁöÑË°®Êºî‰∏≠ÔºåÂêâ‰ªñÊâãÁî®‰ªñ‰∏çÂèØÊÄùË≠∞ÁöÑÊäÄÂ∑ßËÆìËßÄÁúæËÆöÂòÜ„ÄÇ"
            },
            {
                word: "potential",
                pos: "n./adj.",
                def: "ÊΩõÂäõÔºõÂèØËÉΩÊÄßÔºõÊΩõÂú®ÁöÑÔºõÂèØËÉΩÁöÑ",
                family: "",
                example: "With the help of their new coach, the baseball players are able to reach their full potential in games.",
                ch: "Âú®Êñ∞ÊïôÁ∑¥ÁöÑÂπ´Âä©‰∏ãÔºåÈÄô‰∫õÊ£íÁêÉÈÅ∏ÊâãËÉΩÂ§†Âú®ÊØîË≥Ω‰∏≠ÂÆåÂÖ®ÁôºÊèÆ‰ªñÂÄëÁöÑÊΩõÂäõ„ÄÇ"
            },
            {
                word: "scream",
                pos: "n./v.",
                def: "Â∞ñÂè´",
                family: "",
                example: "The children let out screams of delight during the roller-coaster ride.",
                ch: "Â≠©Â≠êÂÄëÂú®‰πòÂùêÈõ≤ÈúÑÈ£õËªäÊôÇÁôºÂá∫‰∫ÜÊ≠°Ê®ÇÁöÑÂ∞ñÂè´ËÅ≤„ÄÇ"
            },
            {
                word: "dizzy",
                pos: "adj.",
                def: "È†≠ÊöàÁõÆÁú©ÁöÑ",
                family: "",
                example: "When my favorite band announced that they were coming to perform in my hometown, I felt dizzy with excitement.",
                ch: "Áï∂ÊàëÊúÄÂñúÊ≠°ÁöÑÊ®ÇÂúòÂÆ£Â∏É‰ªñÂÄëË¶Å‰æÜÊàëÁöÑÂÆ∂ÈÑâË°®ÊºîÊôÇÔºåÊàëÂõ†ËààÂ•ÆËÄåÊÑüÂà∞ÊöàÁú©„ÄÇ"
            },
            {
                word: "overseas",
                pos: "adv./adj.",
                def: "Âú®Êµ∑Â§ñÔºõÂà∞Êµ∑Â§ñÔºõÊµ∑Â§ñÁöÑ",
                family: "",
                example: "After Tina quit her job, she lived overseas in South America for a year to experience life in a different culture.",
                ch: "TinaËæ≠ÊéâÂ∑•‰ΩúÂæåÔºåÂú®Êµ∑Â§ñÁöÑÂçóÁæéÊ¥≤ÁîüÊ¥ª‰∫Ü‰∏ÄÂπ¥ÔºåÈ´îÈ©ó‰∏çÂêåÊñáÂåñÁöÑÁîüÊ¥ª„ÄÇ"
            },
            {
                word: "determination",
                pos: "n.",
                def: "Ê±∫ÂøÉ",
                family: "determine (v.)",
                example: "Kevin showed strong determination to improve his swimming skills by taking lessons every week and practicing hard in his free time.",
                ch: "KevinËóâÁî±ÊØèÈÄ±‰∏äË™≤ÂíåÁ©∫ÈñíÊôÇÈñìÂä™ÂäõÁ∑¥ÁøíÔºåÂ±ïÁèæ‰ªñÊÉ≥ÊèêÂçáÊ∏∏Ê≥≥ÊäÄË°ìÁöÑÂº∑ÁÉàÊ±∫ÂøÉ„ÄÇ"
            },
            {
                word: "faith",
                pos: "n.",
                def: "‰ø°ÂøÉÔºõ‰ø°‰ªª",
                family: "faithful (adj.)",
                example: "Although we were losing at halftime, our teacher had faith in our ability to turn the game around and win.",
                ch: "ÂÑòÁÆ°ÊàëÂÄëÂú®‰∏≠Â†¥‰ºëÊÅØÊôÇËêΩÂæåÔºå‰ΩÜÊàëÂÄëÁöÑËÄÅÂ∏´Â∞çÊàëÂÄëÊâ≠ËΩâÂ±ÄÂã¢‰∏¶Ë¥èÂæóÊØîË≥ΩÁöÑËÉΩÂäõÊúâ‰ø°ÂøÉ„ÄÇ"
            },
            {
                word: "pursue",
                pos: "v.",
                def: "ËøΩÊ±ÇÔºõÂæû‰∫ãÔºõËøΩÈÄêÔºõËøΩÊçï",
                family: "pursuit (n.)",
                example: "Harriet practices very hard to pursue her goal of becoming a successful dancer.",
                ch: "HarrietÈùûÂ∏∏Âä™ÂäõÁ∑¥Áøí‰ª•ËøΩÊ±ÇÂ•πÊàêÁÇ∫‰∏ÄÂêçÊàêÂäüËàûËÄÖÁöÑÁõÆÊ®ô„ÄÇ"
            }
        ];

        const idioms = [
            { phrase: "tons of", def: "Â§ßÈáèÔºõË®±Â§ö", example: "Emily spends little time with her family because she has tons of work to do every day." },
            { phrase: "look for", def: "Â∞ãÊâæ", example: "David looked for his lost phone all over the house but couldn‚Äôt find it." },
            { phrase: "make a living", def: "Ë¨ÄÁîü", example: "Joe makes a living by working as a cook in an Italian restaurant." },
            { phrase: "look forward to", def: "ÊúüÂæÖ", example: "Betsy is really looking forward to her first trip to Europe this summer." },
            { phrase: "be/get carried away", def: "Èô∂ÈÜâÔºõÊøÄÂãïÂæóÁÑ°Ê≥ïËá™ÊåÅ", example: "While Sam was watching the basketball game, he got carried away and cheered louder than everyone else in the gymnasium." },
            { phrase: "come out of", def: "Áî±‚Ä¶‚Ä¶Áî¢Áîü", example: "The athlete‚Äôs victory at the swim meet came out of many months of hard work." },
            { phrase: "as soon as", def: "‰∏Ä‚Ä¶‚Ä¶Â∞±‚Ä¶‚Ä¶", example: "As soon as the rain stopped, the children rushed outside to play in the sunny park." }
        ];

        // Quiz questions ‚Äì B2 style, no level labels
        const quizQuestions = [
            {
                type: "mc",
                q: "Which sentence best explains the \"triumph\" in Ada‚Äôs story?",
                options: [
                    "Ada went to a concert and listened to an orchestra.",
                    "Ada and the other kids used instruments made from trash to perform concerts that amazed people around the world.",
                    "Ada lived in a slum close to a landfill and heard many screeches and loud noises.",
                    "Ada looked for old instruments and made a living by selling them overseas."
                ],
                correct: 1,
                explanation: "The answer connects trash, music, and global success, showing why their achievement can be called a triumph. [web:113][web:115]"
            },
            {
                type: "mc",
                q: "Choose the sentence that correctly uses \"have + O + p.p.\" to describe a result.",
                options: [
                    "With the money from their concerts, they had new instruments to build for the orchestra.",
                    "With the money from their concerts, they had new instruments built for the orchestra.",
                    "With the money from their concerts, they had building new instruments for the orchestra.",
                    "With the money from their concerts, they had to build new instruments for the orchestra."
                ],
                correct: 1,
                explanation: "The structure \"had new instruments built\" shows that they arranged for someone to build the instruments for them. [web:97]"
            },
            {
                type: "error",
                q: "Which part of the sentence needs to be changed? \"Ada‚Äôs success came out of tons of talent, but almost no determination at all.\"",
                options: ["came out of", "tons of talent", "almost no determination at all", "success"],
                correct: 2,
                fix: "tons of determination",
                explanation: "In the unit, Ada‚Äôs story highlights strong determination, not a lack of it; the phrase should match the message of the text."
            },
            {
                type: "mc",
                q: "Which sentence best uses \"potential\" in a way that fits the story?",
                options: [
                    "The slum was very potential because there was tons of trash.",
                    "The coach looked for potential in the instruments, not in the players.",
                    "The children showed great musical potential once they had instruments and encouragement.",
                    "The landfill had potential to be more noisy and glaring."
                ],
                correct: 2,
                explanation: "\"Musical potential\" describes the children‚Äôs ability to improve when given the right chance and support."
            },
            {
                type: "type",
                q: "Complete the sentence: \"Harriet practiced for hours every day to ______ her dream of becoming a successful dancer.\"",
                answer: "pursue",
                hint: "p _ _ s _ e",
                explanation: "To \"pursue\" a dream means to follow it actively and work hard to reach it."
            },
            {
                type: "mc",
                q: "Which sentence most clearly shows that encouragement changed the kids‚Äô behaviour?",
                options: [
                    "Some kids felt dizzy after their first concert.",
                    "Some kids quit the lessons, but with Mr. Ch√°vez‚Äôs encouragement, Ada and the others kept practicing for several hours a day.",
                    "Some kids screamed during the concert.",
                    "Some kids looked forward to making a living in the future."
                ],
                correct: 1,
                explanation: "The answer shows a contrast (quit vs. kept practicing) and explains how encouragement affected their determination."
            },
            {
                type: "error",
                q: "Which word form is wrong in this sentence? \"Her grandma‚Äôs advices were invaluable when she decided to apply for music school overseas.\"",
                options: ["grandma‚Äôs", "advices", "invaluable", "overseas"],
                correct: 1,
                fix: "advice",
                explanation: "\"Advice\" is an uncountable noun in English, so it does not take a plural \"s\"."
            },
            {
                type: "mc",
                q: "Which sentence best shows the idea of \"come out of\" hard experiences?",
                options: [
                    "The scream came out of the girl‚Äôs mouth.",
                    "The musician‚Äôs confidence came out of years of practice on old instruments made from trash.",
                    "The smell came out of the landfill on hot days.",
                    "The concert came out of the hall very late at night."
                ],
                correct: 1,
                explanation: "\"Came out of\" here expresses that the musician‚Äôs confidence was the result of long, difficult practice, which matches the idiom in the unit."
            },
            {
                type: "type",
                q: "Complete the sentence: \"Even though they grew up in a slum, the children‚Äôs ______ in each other helped them keep going.\"",
                answer: "faith",
                hint: "f _ _ _ h",
                explanation: "\"Faith\" describes trust or belief in someone‚Äôs ability, which fits the idea of not giving up."
            },
            {
                type: "mc",
                q: "Which option completes the sentence in the most natural way? \"As soon as the orchestra started playing, the audience ______ and watched in silence.\"",
                options: ["was carried away", "got carried away", "was looking for", "made a living"],
                correct: 1,
                explanation: "\"Was carried away\" shows that the audience became deeply involved in the music, which matches the emotional power of the concerts."
            }
        ];

        // --- STATE ---
        let currentVocabIdx = 0;
        let currentQuizIdx = 0;
        let score = 0;
        let canAnswer = true;

        // --- VOCABULARY LOGIC ---
        function updateVocabUI() {
            const item = vocabulary[currentVocabIdx];
            document.getElementById('vocab-number').innerText = currentVocabIdx + 1;
            document.getElementById('vocab-pos').innerText = item.pos;
            document.getElementById('vocab-word').innerText = item.word;
            document.getElementById('vocab-def').innerText = item.def;
            document.getElementById('vocab-example').innerText = `"${item.example}"`;
            document.getElementById('vocab-ch').innerText = item.ch;
            document.getElementById('vocab-counter').innerText = `${currentVocabIdx + 1} / ${vocabulary.length}`;
            document.getElementById('vocab-family').innerText = item.family ? `Word family: ${item.family}` : "";
            
            document.getElementById('vocab-example-container').classList.add('hidden');
            document.getElementById('btn-reveal').classList.remove('hidden');
            document.getElementById('vocab-card').classList.remove('bg-orange-50');
        }

        function nextVocab() {
            currentVocabIdx = (currentVocabIdx + 1) % vocabulary.length;
            updateVocabUI();
        }

        function prevVocab() {
            currentVocabIdx = (currentVocabIdx - 1 + vocabulary.length) % vocabulary.length;
            updateVocabUI();
        }

        function revealExample() {
            document.getElementById('vocab-example-container').classList.remove('hidden');
            document.getElementById('btn-reveal').classList.add('hidden');
            document.getElementById('vocab-card').classList.add('bg-orange-50');
        }

        function loadIdioms() {
            const list = document.getElementById('idioms-list');
            list.innerHTML = idioms.map(item => `
                <div class="p-4 bg-slate-50 rounded-2xl hover:bg-indigo-50 transition-all">
                    <p class="font-black text-indigo-600">${item.phrase}</p>
                    <p class="text-xs text-slate-400 mb-1">${item.def}</p>
                    <p class="text-xs text-slate-500 italic">"${item.example}"</p>
                </div>
            `).join('');
        }

        // --- TAB LOGIC ---
        function switchTab(tab) {
            document.querySelectorAll('.content-section').forEach(s => s.classList.add('hidden'));
            document.querySelectorAll('.tab-btn').forEach(b => {
                b.className = "tab-btn flex items-center gap-3 py-4 px-8 rounded-full border-2 font-black transition-all duration-300 shadow-sm bg-white text-slate-500 border-slate-100";
            });

            document.getElementById(`section-${tab}`).classList.remove('hidden');
            document.getElementById(`btn-${tab}`).classList.add(`tab-active-${tab}`);

            if (tab === 'quiz') startQuiz();
        }

        // --- QUIZ LOGIC ---
        function startQuiz() {
            currentQuizIdx = 0;
            score = 0;
            renderQuestion();
        }

        function renderQuestion() {
            canAnswer = true;
            const container = document.getElementById('quiz-container');
            const q = quizQuestions[currentQuizIdx];

            let content = `
                <div class="bg-white rounded-[4rem] shadow-2xl border-2 border-pink-100 min-h-[500px] flex flex-col overflow-hidden fade-in">
                    <div class="bg-slate-50 p-6 flex justify-between border-b">
                        <div class="flex items-center gap-3">
                            <div class="bg-pink-500 text-white w-10 h-10 rounded-xl flex items-center justify-center font-black">${currentQuizIdx + 1}</div>
                            <p class="text-sm font-bold text-slate-700">Question ${currentQuizIdx + 1} of ${quizQuestions.length}</p>
                        </div>
                        <p class="text-lg font-black text-pink-600">Score: ${score}</p>
                    </div>
                    <div class="p-10 md:p-16 flex-grow flex flex-col justify-center">
                        <h2 class="text-2xl md:text-3xl font-black text-slate-800 text-center mb-12">${q.q}</h2>
            `;

            if (q.type === 'mc' || q.type === 'error') {
                content += `<div class="grid grid-cols-1 md:grid-cols-2 gap-4">`;
                q.options.forEach((opt, idx) => {
                    content += `<button id="opt-${idx}" onclick="handleAnswer(${idx})" class="quiz-opt p-6 rounded-3xl font-black text-left border-2 bg-white border-slate-100 text-slate-600 hover:border-pink-300 transition-all">${opt}</button>`;
                });
                content += `</div>`;
            } else {
                content += `
                    <div class="space-y-6 max-w-xl mx-auto w-full">
                        <div class="text-center text-pink-300 font-black tracking-widest text-2xl uppercase mb-2">${q.hint}</div>
                        <input type="text" id="type-input" class="w-full text-center text-3xl font-black p-6 bg-slate-50 rounded-3xl border-4 border-dashed border-pink-100 focus:outline-none focus:border-pink-500" placeholder="...">
                        <button id="type-submit-btn" onclick="handleTypeAnswer()" class="w-full bg-indigo-900 text-white py-6 rounded-3xl font-black text-xl hover:bg-indigo-800 transition-all">SUBMIT</button>
                    </div>
                `;
            }

            content += `
                    <div id="feedback" class="mt-8 hidden p-6 rounded-3xl animate-in fade-in zoom-in duration-300">
                        <p id="feedback-text" class="text-2xl font-black mb-2"></p>
                        <div id="explanation-box" class="text-sm md:text-base font-medium text-slate-600 border-t border-slate-200 pt-4 mt-2"></div>
                    </div>
                </div></div>
            `;
            container.innerHTML = content;
        }

        function handleAnswer(idx) {
            if (!canAnswer) return;
            canAnswer = false;

            const q = quizQuestions[currentQuizIdx];
            const isCorrect = idx === q.correct;
            
            const btn = document.getElementById(`opt-${idx}`);
            if (isCorrect) {
                btn.classList.add('option-correct');
            } else {
                btn.classList.add('option-wrong');
                document.getElementById(`opt-${q.correct}`).classList.add('option-correct');
            }

            showFeedback(isCorrect);
        }

        function handleTypeAnswer() {
            if (!canAnswer) return;
            canAnswer = false;

            const input = document.getElementById('type-input');
            const val = input.value.trim().toLowerCase();
            const q = quizQuestions[currentQuizIdx];
            const isCorrect = val === q.answer.toLowerCase();
            
            if (isCorrect) {
                input.classList.add('text-green-600', 'border-green-500');
            } else {
                input.classList.add('text-red-600', 'border-red-500');
                if (val) {
                    input.value = `${val} ‚ûî ${q.answer}`;
                } else {
                    input.value = q.answer;
                }
            }

            showFeedback(isCorrect);
        }

        function showFeedback(isCorrect) {
            if (isCorrect) score++;
            
            const q = quizQuestions[currentQuizIdx];
            const fb = document.getElementById('feedback');
            const fbText = document.getElementById('feedback-text');
            const fbExp = document.getElementById('explanation-box');

            fb.classList.remove('hidden');
            fb.classList.add(isCorrect ? 'bg-green-50' : 'bg-red-50');
            fbText.innerText = isCorrect ? "üéØ Well done!" : "üí° Take another look";
            fbText.className = `text-2xl font-black mb-2 ${isCorrect ? 'text-green-600' : 'text-red-600'}`;
            
            let explanationHTML = `<strong>Explanation:</strong> ${q.explanation || ''}`;
            if (q.fix) explanationHTML = `<strong>Correction:</strong> <span class="text-red-600 underline">${q.fix}</span><br>${explanationHTML}`;
            
            fbExp.innerHTML = explanationHTML;

            setTimeout(() => {
                currentQuizIdx++;
                if (currentQuizIdx < quizQuestions.length) renderQuestion();
                else renderResults();
            }, 4000);
        }

        function getEncouragement(s) {
            if (s === quizQuestions.length) return { title: "Unit Master! üèÜ", msg: "You can now talk about Ada‚Äôs triumph with precise, confident language.", color: "text-yellow-600", icon: "rocket" };
            if (s >= 7) return { title: "Excellent Work! ‚ú®", msg: "You understand how trash, music, and determination fit together in this story. Use these words in your own life story, too.", color: "text-green-600", icon: "sparkles" };
            if (s >= 4) return { title: "Nice Progress! üí™", msg: "Review the Lexicon and Master Patterns tabs, then try the quiz again to deepen your understanding.", color: "text-orange-600", icon: "smile" };
            return { title: "Keep Practicing! üå±", msg: "Focus on the key verbs (pursue, encourage, dazzle) and the causative pattern; they will get easier with more reading and speaking.", color: "text-blue-600", icon: "heart" };
        }

        function renderResults() {
            const enc = getEncouragement(score);
            const container = document.getElementById('quiz-container');
            container.innerHTML = `
                <div class="bg-white rounded-[4rem] p-10 md:p-16 text-center shadow-2xl border-4 border-indigo-50 fade-in">
                    <div class="flex justify-center mb-6">
                        <i class="fas fa-${enc.icon} fa-5x text-yellow-500 drop-shadow-lg"></i>
                    </div>
                    <h2 class="text-5xl font-black mb-4 ${enc.color}">${enc.title}</h2>
                    <p class="text-2xl font-bold text-slate-700 mb-6">You scored <span class="text-indigo-600">${score}</span> / ${quizQuestions.length}</p>
                    <div class="bg-slate-50 p-8 rounded-3xl border-2 border-slate-100 mb-10 max-w-2xl mx-auto italic text-slate-600 text-lg">
                        "${enc.msg}"
                    </div>
                    <button onclick="startQuiz()" class="bg-slate-900 text-white px-12 py-6 rounded-3xl font-black hover:scale-105 transition-all shadow-xl flex items-center gap-3 mx-auto">
                        <i class="fas fa-redo"></i> RETRY CHALLENGE
                    </button>
                </div>
            `;
        }

        // --- INIT ---
        window.onload = () => {
            updateVocabUI();
            loadIdioms();
        };
    </script>
</body>
</html>
