<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Level Up: Built for Freedom | B1U6 Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap');
        
        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background: linear-gradient(135deg, #f8fafc 0%, #ffffff 50%, #eef2ff 100%);
            min-height: 100vh;
        }

        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background-color: #e2e8f0;
            border-radius: 10px;
        }

        .tab-active-vocab { background-color: #0ea5e9; color: white; border-color: #38bdf8; }
        .tab-active-grammar { background-color: #4f46e5; color: white; border-color: #818cf8; }
        .tab-active-quiz { background-color: #ec4899; color: white; border-color: #f472b6; }
        
        .fade-in { animation: fadeIn 0.5s ease-out; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .option-correct { border-color: #22c55e !important; background-color: #f0fdf4 !important; color: #15803d !important; }
        .option-wrong { border-color: #ef4444 !important; background-color: #fef2f2 !important; color: #b91c1c !important; }
    </style>
</head>
<body class="p-4 md:p-8">

    <!-- Header -->
    <header class="max-w-6xl mx-auto mb-8 flex flex-col md:flex-row md:items-center justify-between gap-6">
        <div class="fade-in">
            <div class="flex items-center gap-3 mb-2">
                <div class="bg-sky-500 p-2 rounded-xl shadow-lg rotate-3 text-white">
                    <i class="fas fa-torii-gate fa-2x"></i>
                </div>
                <h1 class="text-3xl md:text-4xl font-black bg-gradient-to-r from-indigo-600 via-sky-500 to-emerald-500 bg-clip-text text-transparent">
                    Level Up: Built for Freedom ‚Äì The Statue of Liberty
                </h1>
            </div>
            <p class="text-slate-500 font-medium flex items-center gap-2">
                <i class="fas fa-bullseye text-sky-400"></i> B1 Reading & Vocabulary Dashboard ‚Äì Unit 6
            </p>
        </div>
        
        <div class="flex items-center gap-4 bg-white p-4 rounded-[2rem] shadow-xl border-2 border-sky-100">
            <div class="relative">
                <div class="w-14 h-14 bg-gradient-to-tr from-sky-400 to-indigo-500 rounded-full flex items-center justify-center text-white shadow-lg border-2 border-white">
                    <i class="fas fa-user-tie fa-2xl"></i>
                </div>
                <div class="absolute -bottom-1 -right-1 bg-green-400 w-4 h-4 rounded-full border-2 border-white"></div>
            </div>
            <div>
                <p class="text-[10px] text-slate-400 uppercase font-black tracking-widest leading-none mb-1">Coach Janelle</p>
                <p class="font-black text-indigo-900 text-lg">Online Now ‚ú®</p>
            </div>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="max-w-6xl mx-auto mb-10 flex flex-wrap justify-center gap-4">
        <button onclick="switchTab('vocab')" id="btn-vocab" class="tab-btn flex items-center gap-3 py-4 px-8 rounded-full border-2 font-black transition-all duration-300 shadow-sm bg-white text-slate-500 border-slate-100 tab-active-vocab">
            <i class="fas fa-brain"></i> B1 Lexicon
        </button>
        <button onclick="switchTab('grammar')" id="btn-grammar" class="tab-btn flex items-center gap-3 py-4 px-8 rounded-full border-2 font-black transition-all duration-300 shadow-sm bg-white text-slate-500 border-slate-100">
            <i class="fas fa-pen-nib"></i> Master Patterns
        </button>
        <button onclick="switchTab('quiz')" id="btn-quiz" class="tab-btn flex items-center gap-3 py-4 px-8 rounded-full border-2 font-black transition-all duration-300 shadow-sm bg-white text-slate-500 border-slate-100">
            <i class="fas fa-trophy"></i> Ultimate Challenge
        </button>
    </nav>

    <!-- Content Sections -->
    <main class="max-w-6xl mx-auto">
        
        <!-- VOCABULARY SECTION -->
        <section id="section-vocab" class="content-section">
            <div class="grid grid-cols-1 lg:grid-cols-12 gap-8 items-start">
                <div class="lg:col-span-8 flex flex-col items-center">
                    <div id="vocab-card" class="w-full bg-white rounded-[3rem] shadow-2xl border-b-[12px] border-sky-400 p-10 md:p-16 text-center relative overflow-hidden transition-all duration-500">
                        <div id="vocab-number" class="absolute top-8 right-12 text-sky-100 font-black text-8xl select-none opacity-40">1</div>
                        <div class="relative z-10">
                            <div id="vocab-pos" class="inline-block px-4 py-1 rounded-full bg-sky-100 text-sky-600 font-black text-xs uppercase tracking-widest mb-3">n.</div>
                            <h2 id="vocab-word" class="text-4xl md:text-5xl font-black text-slate-800 tracking-tighter mb-1">freedom</h2>
                            <h3 id="vocab-def" class="text-xl font-bold text-slate-500 mb-2">Ëá™Áî±</h3>
                            <p id="vocab-family" class="text-sm md:text-base text-slate-500 mb-6 italic"></p>
                            
                            <div id="vocab-example-container" class="hidden animate-in fade-in duration-500 max-w-2xl mx-auto text-left">
                                <div class="p-6 bg-white rounded-3xl border-2 border-sky-200 shadow-inner">
                                    <p id="vocab-example" class="text-lg text-slate-700 font-medium mb-4 italic"></p>
                                    <p id="vocab-ch" class="text-slate-400 font-medium"></p>
                                </div>
                            </div>
                            <button id="btn-reveal" onclick="revealExample()" class="mt-4 bg-sky-500 text-white px-8 py-4 rounded-2xl font-black hover:bg-sky-600 transition-all shadow-lg">REVEAL CONTEXT</button>
                        </div>
                    </div>
                    <div class="flex items-center gap-6 mt-10">
                        <button onclick="prevVocab()" class="w-16 h-16 rounded-3xl bg-white shadow-xl flex items-center justify-center text-slate-400 hover:text-sky-500 transition-all border border-slate-50"><i class="fas fa-chevron-left fa-2x"></i></button>
                        <div id="vocab-counter" class="bg-white px-8 py-4 rounded-3xl font-black text-2xl text-slate-700 shadow-lg">1 / 17</div>
                        <button onclick="nextVocab()" class="w-16 h-16 rounded-3xl bg-sky-500 shadow-xl flex items-center justify-center text-white hover:bg-sky-600 transition-all"><i class="fas fa-chevron-right fa-2x"></i></button>
                    </div>
                </div>
                <div class="lg:col-span-4 bg-white p-6 rounded-[2.5rem] shadow-xl border border-slate-100">
                    <h3 class="text-2xl font-black text-slate-800 mb-6 flex items-center gap-2"><i class="fas fa-heart text-pink-500"></i> Phrases</h3>
                    <div id="idioms-list" class="space-y-3 max-h-[500px] overflow-y-auto pr-2 custom-scrollbar">
                        <!-- Idioms injected here -->
                    </div>
                </div>
            </div>
        </section>

        <!-- GRAMMAR SECTION -->
        <section id="section-grammar" class="content-section hidden">
            <div class="space-y-10 fade-in">
                <!-- Focus: It is/was ... that ... (cleft sentences) + ‚Äúsuch a ... that‚Äù + ‚Äúover time‚Äù -->
                <div class="bg-gradient-to-br from-indigo-900 to-sky-900 rounded-[4rem] p-10 md:p-16 text-white shadow-2xl">
                    <h2 class="text-3xl md:text-4xl font-black mb-6">It is / was ‚Ä¶ that ‚Ä¶</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-10">
                        <div class="bg-white/10 p-8 rounded-[2rem] border border-white/20">
                            <h4 class="font-black text-sky-300 flex items-center gap-2 mb-4">
                                <i class="fas fa-lightbulb"></i> Highlighting information
                            </h4>
                            <p class="mb-4 text-sm md:text-base">
                                We use <span class="text-sky-300 font-bold">It is / was ‚Ä¶ that ‚Ä¶</span> to highlight one part of the sentence, often the time, place or person.  
                                This is called a <span class="text-sky-300 font-bold">cleft sentence</span>.
                            </p>
                            <ul class="space-y-2 text-sm">
                                <li>‚Ä¢ It was <span class="text-sky-300 font-bold">on this day</span> that the United States became independent.</li>
                                <li>‚Ä¢ It is <span class="text-sky-300 font-bold">the Statue of Liberty</span> that many tourists most want to see in New York City.</li>
                                <li>‚Ä¢ It was <span class="text-sky-300 font-bold">France</span> that gave the statue to the United States as a gift.</li>
                            </ul>
                        </div>
                        <div class="space-y-4">
                            <h4 class="font-black text-2xl">Related pattern: such ... that ...</h4>
                            <div class="p-5 bg-indigo-700/50 rounded-2xl border border-indigo-500/30 text-sm">
                                <p>It is such a popular landmark that every visitor to New York City has heard of it and wants to pay a visit to Liberty Island.</p>
                                <p class="mt-2 text-indigo-100 text-xs">
                                    \"Such a/an + adj. + noun + that\" shows a strong result, similar to a cleft sentence that highlights the cause.
                                </p>
                            </div>
                            <div class="p-5 bg-indigo-700/50 rounded-2xl border border-indigo-500/30 text-sm">
                                <p>Over time, this outer layer has been exposed to the air and oxidized so much that it has turned green.</p>
                                <p class="mt-2 text-indigo-100 text-xs">
                                    \"Over time\" helps you describe gradual change, which is useful when you talk about monuments or history.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- B2 usage tip -->
                <div class="bg-white rounded-[4rem] p-10 md:p-16 shadow-2xl border-2 border-sky-50">
                    <h3 class="text-3xl font-black text-slate-800 mb-8 flex items-center gap-4 text-sky-500">
                        <i class="fas fa-landmark"></i> Talking about monuments and history
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <div class="bg-sky-50 p-8 rounded-3xl border-2 border-sky-100">
                            <p class="text-sm mb-3">
                                When you describe a monument like the Statue of Liberty, combine <span class="font-bold">facts</span> with <span class="font-bold">meaning</span>.
                            </p>
                            <ul class="space-y-2 text-sm text-slate-700">
                                <li>‚Ä¢ The statue firmly holds a torch that symbolizes hope and freedom.</li>
                                <li>‚Ä¢ For many tourists, this ancient-looking monument represents the end of slavery and unfair treatment.</li>
                                <li>‚Ä¢ It is at this landmark that visitors from around the globe feel close to the idea of independence.</li>
                            </ul>
                        </div>
                        <div class="p-8 bg-indigo-50 rounded-3xl border-2 border-indigo-100">
                            <p class="font-black text-indigo-900 mb-2 italic">Coach Janelle‚Äôs tip:</p>
                            <p class="text-indigo-800 text-sm leading-relaxed">
                                Try to connect key words from the unit in one sentence: for example,  
                                ‚ÄúThe monument on Liberty Island has become a powerful symbol of freedom and fair treatment, attracting tourists from all over the globe.‚Äù
                            </p>
                        </div>
                    </div>
                </div>

            </div>
        </section>

        <!-- QUIZ SECTION -->
        <section id="section-quiz" class="content-section hidden">
            <div id="quiz-container" class="max-w-4xl mx-auto py-10">
                <!-- Quiz dynamically injected here -->
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="max-w-6xl mx-auto mt-20 p-10 bg-white rounded-[4rem] shadow-xl flex flex-col md:flex-row gap-8 items-center border border-slate-50">
        <div class="w-24 h-24 bg-gradient-to-tr from-sky-500 to-indigo-500 rounded-full flex-shrink-0 flex items-center justify-center text-white text-4xl shadow-xl">
            <i class="fas fa-user-graduate"></i>
        </div>
        <div>
            <h4 class="text-2xl font-black text-indigo-900 mb-2">Coach Janelle's Tip</h4>
            <p id="footer-tip" class="text-indigo-800 italic">
                "When you talk about a place like the Statue of Liberty, show what it represents, not just what it looks like."
            </p>
        </div>
    </footer>

    <script>
        // --- DATA: B1 U6 Built for Freedom ---

        const vocabulary = [
            {
                word: "freedom",
                pos: "n.",
                def: "Ëá™Áî±",
                family: "",
                example: "After Simon turned eighteen, his parents gave him the freedom to watch any movies he wanted to.",
                ch: "SimonÊªøÂçÅÂÖ´Ê≠≤‰πãÂæåÔºå‰ªñÁöÑÁà∂ÊØçËÆì‰ªñËá™Áî±Áúã‰ªª‰Ωï‰ªñÊÉ≥ÁúãÁöÑÈõªÂΩ±„ÄÇ"
            },
            {
                word: "statue",
                pos: "n.",
                def: "ÈõïÂÉè",
                family: "",
                example: "The island of Hainan in China has a 108-meter statue of the goddess Kuanyin.",
                ch: "‰∏≠ÂúãÁöÑÊµ∑ÂçóÂ≥∂Êúâ‰∏ÄÂ∫ß108ÂÖ¨Â∞∫ÁöÑËßÄÈü≥ÈõïÂÉè„ÄÇ"
            },
            {
                word: "remove",
                pos: "v.",
                def: "ÁßªÈô§",
                family: "",
                example: "Jasmine chewed gum to remove the smell of garlic from her breath.",
                ch: "JasmineÂöºÂè£È¶ôÁ≥ñ‰æÜÂéªÈô§Â•πÂè£Ê∞£‰∏≠ÁöÑËíúÂë≥„ÄÇ"
            },
            {
                word: "celebration",
                pos: "n.",
                def: "ÊÖ∂Á•ùÔºõÊÖ∂Á•ùÊ¥ªÂãï",
                family: "celebrate (v.)",
                example: "Yvonne invited her friends out for dinner in celebration of finishing all of their exams.",
                ch: "YvonneÈÇÄË´ãÂ•πÁöÑÊúãÂèãÂ§ñÂá∫ÂêÉÊôöÈ§êÔºåÊÖ∂Á•ù‰ªñÂÄëÂÆåÊàêÊâÄÊúâÁöÑËÄÉË©¶„ÄÇ"
            },
            {
                word: "independence",
                pos: "n.",
                def: "Áç®Á´ã",
                family: "independent (adj.)",
                example: "India achieved independence from the United Kingdom on August 15, 1947.",
                ch: "Âç∞Â∫¶Âú®1947Âπ¥8Êúà15Êó•ËÑ´Èõ¢Ëã±ÂúãÂÆåÊàêÁç®Á´ã„ÄÇ"
            },
            {
                word: "monument",
                pos: "n.",
                def: "Á¥ÄÂøµÁ¢ë",
                family: "",
                example: "The Taiwan Salt Museum and Qigu Salt Mountain in Tainan are monuments to Taiwan‚Äôs salt producing past.",
                ch: "Âú®Ëá∫ÂçóÁöÑËá∫ÁÅ£ÈπΩÂçöÁâ©È§®Âèä‰∏ÉËÇ°ÈπΩÂ±±ÊòØËá∫ÁÅ£ÈÅéÂéªÁî¢ÈπΩÁöÑË¶ãË≠â„ÄÇ"
            },
            {
                word: "symbolize",
                pos: "v.",
                def: "Ë±°ÂæµÔºõ‰ª£Ë°®",
                family: "symbol (n.), symbolic (adj.)",
                example: "In Beauty and the Beast, the dying rose symbolizes the Beast‚Äôs chance of becoming human again.",
                ch: "Âú®„ÄäÁæéÂ•≥ËàáÈáéÁç∏„ÄãÁï∂‰∏≠ÔºåÈÄêÊº∏ÂáãË¨ùÁöÑÁé´Áë∞Ë±°ÂæµÈáéÁç∏ÂÜçÊ¨°ËÆäÊàê‰∫∫È°ûÁöÑÊ©üÊúÉ„ÄÇ"
            },
            {
                word: "firmly",
                pos: "adv.",
                def: "Áâ¢Âõ∫Âú∞ÔºõÂ†ÖÂÆöÂú∞",
                family: "firm (adj.)",
                example: "Jack firmly closed the lid of the jar so that it wouldn‚Äôt open accidentally.",
                ch: "JackÁâ¢Áâ¢ÈóúÁ∑äÁΩêÂ≠êÁöÑËìãÂ≠êÔºå‰ª•ËÆìÂÆÉ‰∏çÊúÉÊÑèÂ§ñÊâìÈñã„ÄÇ"
            },
            {
                word: "represent",
                pos: "v.",
                def: "‰ΩúÁÇ∫‚Ä¶‚Ä¶ÁöÑË±°ÂæµÔºõ‰ª£Ë°®",
                family: "representation (n.)",
                example: "Sometimes Chinese speakers type \"3Q\" to represent the words \"thank you\" because \"3Q\" sounds like \"thank you\" in Chinese.",
                ch: "ÊúâÊôÇÂÄôË™™ËèØË™ûÁöÑ‰∫∫ÊúÉÊâìÂá∫„Äå3Q„Äç‰æÜ‰ª£Ë°®„ÄåË¨ùË¨ù‰Ω†„ÄçÈÄô‰∫õÂ≠óÔºåÂõ†ÁÇ∫„Äå3Q„ÄçÁöÑËèØË™ûËÅΩËµ∑‰æÜÂÉè„Äåthank you„Äç„ÄÇ"
            },
            {
                word: "ancient",
                pos: "adj.",
                def: "Âè§‰ª£ÁöÑÔºõÂè§ËÄÅÁöÑ",
                family: "",
                example: "The Great Wall was built thousands of years ago to stop ancient China‚Äôs enemies from invading.",
                ch: "Èï∑ÂüéÂú®Êï∏ÂçÉÂπ¥ÂâçË¢´Âª∫ÈÄ†‰æÜÈòªÊìãÂè§‰ª£‰∏≠ÂúãÊïµ‰∫∫ÁöÑÊîªÊìä„ÄÇ"
            },
            {
                word: "slavery",
                pos: "n.",
                def: "ËìÑÂ•¥Âà∂ÔºõÂ•¥Èö∏Ë∫´ÂàÜ",
                family: "slave (n.)",
                example: "This book is about a girl who was sold into slavery and made to work on a farm for years.",
                ch: "ÈÄôÊú¨Êõ∏ÊòØÈóúÊñº‰∏ÄÂÄãË¢´Ë≥£ÁÇ∫Â•¥Èö∏Ôºå‰∏¶Ë¢´Ëø´Âú®Ëæ≤Â†¥‰∏äÂ∑•‰ΩúÂ§öÂπ¥ÁöÑÂ•≥Â≠©„ÄÇ"
            },
            {
                word: "unfair",
                pos: "adj.",
                def: "‰∏çÂÖ¨Ê≠£ÁöÑÔºõ‰∏çÂÖ¨Âπ≥ÁöÑ",
                family: "",
                example: "Several players cheated during the game, so everybody agrees that the final score is unfair.",
                ch: "Âπæ‰ΩçÁêÉÂì°Âú®ÈÄôÂ†¥ÊØîË≥Ω‰∏≠‰ΩúÂºäÔºåÊâÄ‰ª•ÊØèÂÄã‰∫∫ÈÉΩ‰∏ÄËá¥Ë™çÁÇ∫ÊúÄÂæåÁöÑÂàÜÊï∏ÊòØ‰∏çÂÖ¨Âπ≥ÁöÑ„ÄÇ"
            },
            {
                word: "treatment",
                pos: "n.",
                def: "Â∞çÂæÖÔºõÂæÖÈÅá",
                family: "",
                example: "The prison was closed after many reports revealed the poor treatment of prisoners there.",
                ch: "Ë®±Â§öÂ†±ÂëäÊè≠Áôº‰∫ÜÂõöÁäØÂú®ÈÇ£Ë£°ÁöÑÊÉ°Âä£ÂæÖÈÅá‰πãÂæåÔºåÈÄôÂ∫ßÁõ£ÁçÑË¢´ÈóúÈñâ‰∫Ü„ÄÇ"
            },
            {
                word: "tourist",
                pos: "n.",
                def: "ÈÅäÂÆ¢",
                family: "tourism (n.)",
                example: "Mary and John went into the tourist center to ask for information about local hotels.",
                ch: "MaryÂíåJohnÂà∞ÈÅäÂÆ¢‰∏≠ÂøÉÂéªË©¢ÂïèÈóúÊñºÁï∂Âú∞È£ØÂ∫óÁöÑË≥áË®ä„ÄÇ"
            },
            {
                word: "attraction",
                pos: "n.",
                def: "ÊúâÂê∏ÂºïÂäõÁöÑ‰∫ãÁâ©ÊàñÂú∞Èªû",
                family: "attract (v.), attractive (adj.)",
                example: "Beaches and water sports are the main attractions in Kenting.",
                ch: "Êµ∑ÁÅòÂíåÊ∞¥‰∏äÈÅãÂãïÊòØÂ¢æ‰∏ÅÊúÄ‰∏ªË¶ÅÁöÑË≥£Èªû„ÄÇ"
            },
            {
                word: "landmark",
                pos: "n.",
                def: "Âú∞Ê®ô",
                family: "",
                example: "The Tokyo Tower and the Tokyo Skytree are two of Japan‚Äôs most famous landmarks.",
                ch: "Êù±‰∫¨ÈêµÂ°îÂèäÊù±‰∫¨Êô¥Á©∫Â°îÊòØÂÖ©ÂÄãÊó•Êú¨ÊúÄËëóÂêçÁöÑÂú∞Ê®ô„ÄÇ"
            },
            {
                word: "globe",
                pos: "n.",
                def: "Âú∞ÁêÉÔºõ‰∏ñÁïå",
                family: "",
                example: "Many of David Bowie‚Äôs fans around the globe posted images or words on Facebook and Instagram in memory of him after he died on January 10, 2016.",
                ch: "Â§ßË°õÈÆë‰ºäÂú®2016Âπ¥1Êúà10Êó•Âéª‰∏ñÂæåÔºåÂÖ®‰∏ñÁïåË®±Â§ö‰ªñÁöÑÁ≤âÁµ≤Âú®ËáâÊõ∏ÂíåInstagram‰∏äÂÇ≥ÂúñÊñáÁ¥ÄÂøµ‰ªñ„ÄÇ"
            }
        ];

        const idioms = [
            { phrase: "even though", def: "ÂÑòÁÆ°", example: "Kyle knows all the words to this song even though he has only heard it a few times before." },
            { phrase: "close to", def: "Â∞áËøë", example: "During the performance, close to two thousand people sang along with the band and created an unforgettable memory together." },
            { phrase: "over time", def: "Èö®ËëóÊôÇÈñìÈÅéÂéª", example: "Janice found the math class really tough at first, but it became easier over time." },
            { phrase: "pay a visit to", def: "ÊãúË®™ÔºõÂèÉËßÄ", example: "Tracy decided to pay a visit to Big Ben while she was on a business trip in London." },
            { phrase: "as always", def: "‰∏ÄÁõ¥Â¶ÇÊ≠§", example: "The noodle shop has a long line of people outside as always because they make the best noodles in town." }
        ];

        // Quiz questions ‚Äì B2 style, no explicit level labels
        const quizQuestions = [
            {
                type: "mc",
                q: "Which sentence best shows what the Statue of Liberty represents?",
                options: [
                    "The Statue of Liberty is a very tall statue made of copper.",
                    "The Statue of Liberty is a monument that symbolizes freedom and independence for many people around the globe.",
                    "The Statue of Liberty stands on an island close to New York City.",
                    "The Statue of Liberty is a tourist attraction with a torch and a crown."
                ],
                correct: 1,
                explanation: "The answer connects the monument to abstract ideas (freedom and independence) and mentions its global meaning."
            },
            {
                type: "mc",
                q: "Choose the most natural sentence about the statue‚Äôs location.",
                options: [
                    "It is on Liberty Island that many tourists pay a visit to the Statue of Liberty every year.",
                    "On Liberty Island it is many tourists that pay a visit to the Statue of Liberty every year.",
                    "It is many tourists that on Liberty Island pay a visit to the Statue of Liberty every year.",
                    "On Liberty Island is it that many tourists pay a visit to the Statue of Liberty every year."
                ],
                correct: 0,
                explanation: "The cleft sentence \"It is on Liberty Island that ...\" correctly highlights the place while keeping normal word order in the rest of the sentence."
            },
            {
                type: "error",
                q: "Which part of the sentence needs to be corrected? \"It was freedom that many slaves finally achieved when slavery became unfair.\"",
                options: ["It was freedom", "that many slaves finally achieved", "when slavery became", "unfair"],
                correct: 2,
                fix: "when slavery was ended / abolished",
                explanation: "Slavery was already unfair; the historical change is that slavery was ended or abolished, not that it \"became\" unfair."
            },
            {
                type: "mc",
                q: "Which sentence best uses \"over time\" to describe change?",
                options: [
                    "Over time the statue is tall and very attractive to tourists.",
                    "The monument was built over time and is now a famous landmark.",
                    "Over time, the copper outer layer of the statue oxidized and turned from reddish-brown to green.",
                    "The statue stands firmly over time on its island."
                ],
                correct: 2,
                explanation: "The answer clearly shows a gradual physical change (oxidation and colour change) over a period of time."
            },
            {
                type: "type",
                q: "Complete the sentence: \"The new museum was built as a ______ to the people who fought for independence.\"",
                answer: "monument",
                hint: "m _ _ _ _ _ _ t",
                explanation: "A \"monument\" is a building or structure that reminds people of an important person or event."
            },
            {
                type: "mc",
                q: "Which sentence most clearly connects tourism with local culture?",
                options: [
                    "Tourists like to pay a visit to famous cities.",
                    "Tourism is important and attracts people from many countries.",
                    "The landmark has become such an important attraction that it brings tourists close to the history and culture of the country.",
                    "Tourists travel around the globe to see different places."
                ],
                correct: 2,
                explanation: "The answer links the attraction to the deeper experience of history and culture, not just the number of visitors."
            },
            {
                type: "error",
                q: "Which word form is wrong in this sentence? \"Although the statue looks ancient, it still has a strong symbolic for people who care about fair treatment and independence.\"",
                options: ["ancient", "still", "symbolic", "fair treatment"],
                correct: 2,
                fix: "symbolism / symbolic meaning",
                explanation: "After \"strong\", we need a noun like \"symbolism\" or the phrase \"symbolic meaning\", not the adjective \"symbolic\" alone."
            },
            {
                type: "mc",
                q: "Which sentence best describes how visitors feel when they see the statue?",
                options: [
                    "Close to many people think the statue is nice.",
                    "Many tourists pay a visit to the statue and take photos.",
                    "Even though the statue is just copper and stone, it can strongly represent people‚Äôs hope for a fairer world.",
                    "The statue is tall and has a torch and a crown."
                ],
                correct: 2,
                explanation: "The answer contrasts the physical material with the emotional and symbolic meaning, which is a more advanced way to describe reactions."
            },
            {
                type: "type",
                q: "Complete the sentence: \"Some people feel that the government‚Äôs ______ of immigrants is still unfair, even today.\"",
                answer: "treatment",
                hint: "t _ _ _ _ _ _ t",
                explanation: "\"Treatment\" describes how people are treated or dealt with, which matches the context."
            },
            {
                type: "mc",
                q: "Which option completes the sentence in the most natural way? \"As always, the Statue of Liberty stands tall and proud, ______ visitors from all around the globe.\"",
                options: ["attracting", "attraction", "attracted", "attracts"],
                correct: 0,
                explanation: "\"Stands tall and proud, attracting visitors\" uses a present participle to show two actions happening at the same time."
            }
        ];

        // --- STATE ---
        let currentVocabIdx = 0;
        let currentQuizIdx = 0;
        let score = 0;
        let canAnswer = true;

        // --- VOCABULARY LOGIC ---
        function updateVocabUI() {
            const item = vocabulary[currentVocabIdx];
            document.getElementById('vocab-number').innerText = currentVocabIdx + 1;
            document.getElementById('vocab-pos').innerText = item.pos;
            document.getElementById('vocab-word').innerText = item.word;
            document.getElementById('vocab-def').innerText = item.def;
            document.getElementById('vocab-example').innerText = `"${item.example}"`;
            document.getElementById('vocab-ch').innerText = item.ch;
            document.getElementById('vocab-counter').innerText = `${currentVocabIdx + 1} / ${vocabulary.length}`;
            document.getElementById('vocab-family').innerText = item.family ? `Word family: ${item.family}` : "";
            
            document.getElementById('vocab-example-container').classList.add('hidden');
            document.getElementById('btn-reveal').classList.remove('hidden');
            document.getElementById('vocab-card').classList.remove('bg-sky-50');
        }

        function nextVocab() {
            currentVocabIdx = (currentVocabIdx + 1) % vocabulary.length;
            updateVocabUI();
        }

        function prevVocab() {
            currentVocabIdx = (currentVocabIdx - 1 + vocabulary.length) % vocabulary.length;
            updateVocabUI();
        }

        function revealExample() {
            document.getElementById('vocab-example-container').classList.remove('hidden');
            document.getElementById('btn-reveal').classList.add('hidden');
            document.getElementById('vocab-card').classList.add('bg-sky-50');
        }

        function loadIdioms() {
            const list = document.getElementById('idioms-list');
            list.innerHTML = idioms.map(item => `
                <div class="p-4 bg-slate-50 rounded-2xl hover:bg-indigo-50 transition-all">
                    <p class="font-black text-indigo-600">${item.phrase}</p>
                    <p class="text-xs text-slate-400 mb-1">${item.def}</p>
                    <p class="text-xs text-slate-500 italic">"${item.example}"</p>
                </div>
            `).join('');
        }

        // --- TAB LOGIC ---
        function switchTab(tab) {
            document.querySelectorAll('.content-section').forEach(s => s.classList.add('hidden'));
            document.querySelectorAll('.tab-btn').forEach(b => {
                b.className = "tab-btn flex items-center gap-3 py-4 px-8 rounded-full border-2 font-black transition-all duration-300 shadow-sm bg-white text-slate-500 border-slate-100";
            });

            document.getElementById(`section-${tab}`).classList.remove('hidden');
            document.getElementById(`btn-${tab}`).classList.add(`tab-active-${tab}`);

            if (tab === 'quiz') startQuiz();
        }

        // --- QUIZ LOGIC ---
        function startQuiz() {
            currentQuizIdx = 0;
            score = 0;
            renderQuestion();
        }

        function renderQuestion() {
            canAnswer = true;
            const container = document.getElementById('quiz-container');
            const q = quizQuestions[currentQuizIdx];

            let content = `
                <div class="bg-white rounded-[4rem] shadow-2xl border-2 border-pink-100 min-h-[500px] flex flex-col overflow-hidden fade-in">
                    <div class="bg-slate-50 p-6 flex justify-between border-b">
                        <div class="flex items-center gap-3">
                            <div class="bg-pink-500 text-white w-10 h-10 rounded-xl flex items-center justify-center font-black">${currentQuizIdx + 1}</div>
                            <p class="text-sm font-bold text-slate-700">Question ${currentQuizIdx + 1} of ${quizQuestions.length}</p>
                        </div>
                        <p class="text-lg font-black text-pink-600">Score: ${score}</p>
                    </div>
                    <div class="p-10 md:p-16 flex-grow flex flex-col justify-center">
                        <h2 class="text-2xl md:text-3xl font-black text-slate-800 text-center mb-12">${q.q}</h2>
            `;

            if (q.type === 'mc' || q.type === 'error') {
                content += `<div class="grid grid-cols-1 md:grid-cols-2 gap-4">`;
                q.options.forEach((opt, idx) => {
                    content += `<button id="opt-${idx}" onclick="handleAnswer(${idx})" class="quiz-opt p-6 rounded-3xl font-black text-left border-2 bg-white border-slate-100 text-slate-600 hover:border-pink-300 transition-all">${opt}</button>`;
                });
                content += `</div>`;
            } else {
                content += `
                    <div class="space-y-6 max-w-xl mx-auto w-full">
                        <div class="text-center text-pink-300 font-black tracking-widest text-2xl uppercase mb-2">${q.hint}</div>
                        <input type="text" id="type-input" class="w-full text-center text-3xl font-black p-6 bg-slate-50 rounded-3xl border-4 border-dashed border-pink-100 focus:outline-none focus:border-pink-500" placeholder="...">
                        <button id="type-submit-btn" onclick="handleTypeAnswer()" class="w-full bg-indigo-900 text-white py-6 rounded-3xl font-black text-xl hover:bg-indigo-800 transition-all">SUBMIT</button>
                    </div>
                `;
            }

            content += `
                    <div id="feedback" class="mt-8 hidden p-6 rounded-3xl animate-in fade-in zoom-in duration-300">
                        <p id="feedback-text" class="text-2xl font-black mb-2"></p>
                        <div id="explanation-box" class="text-sm md:text-base font-medium text-slate-600 border-t border-slate-200 pt-4 mt-2"></div>
                    </div>
                </div></div>
            `;
            container.innerHTML = content;
        }

        function handleAnswer(idx) {
            if (!canAnswer) return;
            canAnswer = false;

            const q = quizQuestions[currentQuizIdx];
            const isCorrect = idx === q.correct;
            
            const btn = document.getElementById(`opt-${idx}`);
            if (isCorrect) {
                btn.classList.add('option-correct');
            } else {
                btn.classList.add('option-wrong');
                document.getElementById(`opt-${q.correct}`).classList.add('option-correct');
            }

            showFeedback(isCorrect);
        }

        function handleTypeAnswer() {
            if (!canAnswer) return;
            canAnswer = false;

            const input = document.getElementById('type-input');
            const val = input.value.trim().toLowerCase();
            const q = quizQuestions[currentQuizIdx];
            const isCorrect = val === q.answer.toLowerCase();
            
            if (isCorrect) {
                input.classList.add('text-green-600', 'border-green-500');
            } else {
                input.classList.add('text-red-600', 'border-red-500');
                if (val) {
                    input.value = `${val} ‚ûî ${q.answer}`;
                } else {
                    input.value = q.answer;
                }
            }

            showFeedback(isCorrect);
        }

        function showFeedback(isCorrect) {
            if (isCorrect) score++;
            
            const q = quizQuestions[currentQuizIdx];
            const fb = document.getElementById('feedback');
            const fbText = document.getElementById('feedback-text');
            const fbExp = document.getElementById('explanation-box');

            fb.classList.remove('hidden');
            fb.classList.add(isCorrect ? 'bg-green-50' : 'bg-red-50');
            fbText.innerText = isCorrect ? "üéØ Well done!" : "üí° Take another look";
            fbText.className = `text-2xl font-black mb-2 ${isCorrect ? 'text-green-600' : 'text-red-600'}`;
            
            let explanationHTML = `<strong>Explanation:</strong> ${q.explanation || ''}`;
            if (q.fix) explanationHTML = `<strong>Correction:</strong> <span class="text-red-600 underline">${q.fix}</span><br>${explanationHTML}`;
            
            fbExp.innerHTML = explanationHTML;

            setTimeout(() => {
                currentQuizIdx++;
                if (currentQuizIdx < quizQuestions.length) renderQuestion();
                else renderResults();
            }, 4000);
        }

        function getEncouragement(s) {
            if (s === quizQuestions.length) return { title: "Unit Master! üèÜ", msg: "You can now describe the Statue of Liberty with clear, accurate language.", color: "text-yellow-600", icon: "rocket" };
            if (s >= 7) return { title: "Excellent Work! ‚ú®", msg: "You handle the key vocabulary and patterns well. Try using them in speaking or writing tasks.", color: "text-green-600", icon: "sparkles" };
            if (s >= 4) return { title: "Nice Progress! üí™", msg: "Review the Lexicon and Master Patterns tabs, then try the quiz again to strengthen your memory.", color: "text-orange-600", icon: "smile" };
            return { title: "Keep Practicing! üå±", msg: "Focus on word families and the \"It is/was ... that ...\" pattern; they will become more natural with use.", color: "text-blue-600", icon: "heart" };
        }

        function renderResults() {
            const enc = getEncouragement(score);
            const container = document.getElementById('quiz-container');
            container.innerHTML = `
                <div class="bg-white rounded-[4rem] p-10 md:p-16 text-center shadow-2xl border-4 border-indigo-50 fade-in">
                    <div class="flex justify-center mb-6">
                        <i class="fas fa-${enc.icon} fa-5x text-yellow-500 drop-shadow-lg"></i>
                    </div>
                    <h2 class="text-5xl font-black mb-4 ${enc.color}">${enc.title}</h2>
                    <p class="text-2xl font-bold text-slate-700 mb-6">You scored <span class="text-indigo-600">${score}</span> / ${quizQuestions.length}</p>
                    <div class="bg-slate-50 p-8 rounded-3xl border-2 border-slate-100 mb-10 max-w-2xl mx-auto italic text-slate-600 text-lg">
                        "${enc.msg}"
                    </div>
                    <button onclick="startQuiz()" class="bg-slate-900 text-white px-12 py-6 rounded-3xl font-black hover:scale-105 transition-all shadow-xl flex items-center gap-3 mx-auto">
                        <i class="fas fa-redo"></i> RETRY CHALLENGE
                    </button>
                </div>
            `;
        }

        // --- INIT ---
        window.onload = () => {
            updateVocabUI();
            loadIdioms();
        };
    </script>
</body>
</html>
